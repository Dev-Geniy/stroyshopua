<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Partner Cabinet ‚Äî Samostroy</title>

  <link rel="icon" type="image/png" href="favicon.png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    :root{
      --bg:#050509;
      --bg2:#070816;
      --card:#0f1120;
      --card2:#14172a;
      --ink:#f5f5f7;
      --muted:#a0a7bd;
      --line:rgba(255,255,255,.10);
      --shadow:0 18px 44px rgba(0,0,0,.55);
      --r:18px;

      --accent:#ff7a1a;
      --accent2:#ffb24a;
      --blue:#5ab2ff;
      --good:#29d17a;
      --danger:#ff4d4d;

      --max:1240px;

      /* dropdown theme */
      --ddBg:#0f1120;
      --ddBg2:#14172a;
      --ddLine:rgba(255,255,255,.12);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;
      color:var(--ink);
      overflow-x:hidden;
      background: #050509;
    }

    /* fixed background */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      z-index:-1;
      background:
        radial-gradient(1200px 600px at 70% -10%, rgba(255,122,26,.18), transparent 60%),
        radial-gradient(800px 500px at 10% 10%, rgba(90,178,255,.12), transparent 55%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      will-change: transform;
      transform: translateZ(0);
    }

    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}
    button,input,select,textarea{font-family:inherit}
    .wrap{max-width:var(--max);margin:0 auto;padding:0 18px}
    .hidden{display:none !important;}
    code{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; font-size: 12px; opacity:.85;}
    .muted{color:var(--muted);line-height:1.55}
    .h1{margin:0;font-size:34px;letter-spacing:-.6px;line-height:1.06}
    
/* ‚úÖ Greeting image inside the H1 (replaces "–í—ñ—Ç–∞—î–º–æ,") */
.h1Welcome{
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
}

.h1Welcome .helloImg{
  height:146px;        /* üîß —Ä–∞–∑–º–µ—Ä –∫–∞—Ä—Ç–∏–Ω–∫–∏ (–µ—Å–ª–∏ –Ω–∞–¥–æ ‚Äî –º–µ–Ω—è–π) */
  width:auto;
  display:block;
  flex:0 0 auto;
  pointer-events:none;
  user-select:none;
  filter: drop-shadow(0 14px 30px rgba(0,0,0,.35));
}

@media (max-width:680px){
  .h1Welcome .helloImg{
    height:146px;      /* üîß —Ä–∞–∑–º–µ—Ä –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ */
  }
}

    /* ‚úÖ Greeting layout: image left, text right (title + subtitle) */
.greetRow{
  display:grid;
  grid-template-columns: 120px 1fr; /* —à–∏—Ä–∏–Ω–∞ –ª–µ–≤–æ–π –∑–æ–Ω—ã –ø–æ–¥ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ */
  gap:18px;
  align-items:start;
}

.greetArt{
  width:120px;
  display:flex;
  align-items:flex-start;
  justify-content:center;
}

.greetArt img{
  width:100%;
  height:auto;
  display:block;
  filter: drop-shadow(0 18px 40px rgba(0,0,0,.35));
  user-select:none;
  pointer-events:none;
}

.greetText{
  min-width:0;
}

.greetSub{
  margin-top:10px;
}

/* –º–æ–±–∏–ª–∫–∞: —Å—Ç–∞–≤–∏–º –∫–∞—Ä—Ç–∏–Ω–∫—É —Å–≤–µ—Ä—Ö—É –∏ —Ç–µ–∫—Å—Ç –Ω–∏–∂–µ */
@media (max-width:680px){
  .greetArt{ width:92px; }
}

    
    .h2{margin:0;font-size:22px;letter-spacing:-.2px}
    .grad{
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      -webkit-background-clip:text;background-clip:text;
      color:transparent;
    }
    .glass{
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border-radius:24px;
      box-shadow:var(--shadow);
    }

    .btn{
      display:inline-flex;align-items:center;justify-content:center;
      gap:8px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.06);
      color:var(--ink);
      padding:10px 14px;
      border-radius:14px;
      cursor:pointer;
      transition:.2s ease;
      user-select:none;
      white-space:nowrap;
    }
    .btn:hover{transform:translateY(-1px);border-color:rgba(255,255,255,.18)}
    .btn:active{transform:translateY(0)}
    .btn i{width:18px;height:18px}
    .btnPrimary{
      border-color: rgba(255,122,26,.35);
      background: linear-gradient(135deg, rgba(255,122,26,.18), rgba(255,178,74,.10));
      box-shadow: 0 10px 30px rgba(255,122,26,.12);
    }
    .btnBlue{
      border-color: rgba(90,178,255,.35);
      background: linear-gradient(135deg, rgba(90,178,255,.18), rgba(90,178,255,.08));
    }
    .btnGhost{background:transparent}

    .loader{
      position:fixed;inset:0;
      display:grid;place-items:center;
      z-index:200;
      background: rgba(0,0,0,.62);
      backdrop-filter: blur(10px);
    }
    .spinner{
      width:56px;height:56px;
      border-radius:50%;
      border:3px solid rgba(255,255,255,.20);
      border-top-color: rgba(255,122,26,.95);
      animation: spin .9s linear infinite;
      box-shadow: 0 20px 60px rgba(255,122,26,.18);
    }
    @keyframes spin{to{transform:rotate(360deg)}}

    .toast{
      position:fixed;left:50%;bottom:18px;transform:translateX(-50%);
      background: rgba(12,12,18,.92);
      border:1px solid rgba(255,255,255,.14);
      padding:12px 14px;border-radius:14px;
      color:var(--ink);
      box-shadow: 0 18px 60px rgba(0,0,0,.55);
      opacity:0;pointer-events:none;
      transition:.2s ease;
      z-index:220;
      font-size:13px;
    }
    .toast.show{opacity:1;transform:translateX(-50%) translateY(-4px)}

    /* LOGIN */
    .loginPage{
      min-height:100vh;
      display:grid;
      place-items:center;
      padding:24px 0;
    }
    .loginCard{
      width:min(980px, calc(100% - 36px));
      padding:18px;
      border-radius:28px;
      position:relative;
      overflow:hidden;
    }
    .loginCard:before{
      content:"";
      position:absolute;inset:-2px;
      background:
        radial-gradient(700px 400px at 15% 0%, rgba(90,178,255,.22), transparent 60%),
        radial-gradient(800px 450px at 90% 10%, rgba(255,122,26,.26), transparent 60%);
      pointer-events:none;
    }
    .loginInner{
      position:relative;
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:16px;
      align-items:stretch;
    }
    .loginLeft, .loginRight{
      border:1px solid var(--line);
      background: rgba(0,0,0,.22);
      border-radius:22px;
      padding:18px;
    }
    .loginLeft .badge{
      display:inline-flex;align-items:center;gap:8px;
      padding:8px 10px;border-radius:999px;
      border:1px solid var(--line);
      background: rgba(0,0,0,.18);
      color:var(--muted);
      font-size:12px;
    }
    .loginLeft .badge i{width:16px;height:16px;opacity:.9}
    .loginLeft p{margin:12px 0 0;color:var(--muted);line-height:1.55}
    .loginFeature{
      margin-top:14px;
      display:grid;gap:10px;
    }
    .fItem{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      border-radius:18px;
      padding:12px;
      display:flex;gap:10px;align-items:flex-start;
    }
    .fItem i{width:18px;height:18px;color:rgba(255,255,255,.88);margin-top:2px}
    .fItem b{display:block;font-size:13px}
    .fItem span{display:block;color:var(--muted);font-size:12px;margin-top:5px;line-height:1.45}

    .loginRight h3{margin:0;font-size:18px;letter-spacing:-.2px}
    .form{margin-top:12px;display:grid;gap:10px}
    .field{
      border:1px solid var(--line);
      background: rgba(255,255,255,.05);
      border-radius:16px;
      padding:10px 12px;
      display:flex;align-items:center;gap:10px;
      color:var(--muted);
      transition:.2s ease;
    }
    .field i{width:18px;height:18px;opacity:.85}
    .field input, .field select, .field textarea{
      width:100%;
      border:0;outline:none;background:transparent;
      color:var(--ink);
      font-size:14px;
      resize:none;
    }

    /* ‚úÖ focus glow for all fields */
    .field:focus-within{
      border-color: rgba(255,122,26,.35);
      box-shadow: 0 0 0 5px rgba(255,122,26,.12);
    }

    /* ‚úÖ attention pulse (only when empty) */
    .field.attention{
      border-color: rgba(255,122,26,.22);
      animation: softPulse 1.8s ease-in-out infinite;
    }
    @keyframes softPulse{
      0%,100%{ box-shadow: 0 0 0 0 rgba(255,122,26,0); }
      50%{    box-shadow: 0 0 0 7px rgba(255,122,26,.12); }
    }

    .avatarPick{
      display:grid;
      grid-template-columns: 92px 1fr;
      gap:12px;
      align-items:center;
      margin-top:6px;
    }
    .avatarPreview{
      width:92px;height:92px;border-radius:22px;
      border:1px solid rgba(255,255,255,.14);
      overflow:hidden;
      background: rgba(0,0,0,.22);
      display:grid;place-items:center;
      position:relative;
      box-shadow: 0 18px 60px rgba(0,0,0,.35);
    }
    .avatarPreview img{width:100%;height:100%;object-fit:cover}
    .avatarPreview .ph{
      font-weight:900;
      font-size:28px;
      color:rgba(255,255,255,.80);
    }
    .avatarTools{display:grid;gap:8px}
    .hint{color:var(--muted);font-size:12px;line-height:1.45}
    .loginActions{display:flex;gap:10px;margin-top:10px;flex-wrap:wrap}
    .loginActions .btn{flex:1}

    /* ‚úÖ custom file picker (stylish + pulse) */
    .fileInput{
      position:absolute;
      left:-9999px;
      width:1px;height:1px;
      opacity:0;
      pointer-events:none;
    }
    .filePick{
      border:1px solid var(--line);
      background: rgba(255,255,255,.05);
      border-radius:16px;
      padding:10px 12px;
      display:flex;
      align-items:center;
      gap:10px;
      cursor:pointer;
      transition:.2s ease;
      user-select:none;
    }
    .filePick:hover{
      transform: translateY(-1px);
      border-color: rgba(255,255,255,.18);
    }
    .filePick i{width:18px;height:18px;opacity:.9}
    .filePickTitle{font-weight:800;font-size:13px;color:var(--ink)}
    .filePickMeta{
      margin-left:auto;
      color:var(--muted);
      font-size:12px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width:45%;
    }
    .filePick.pulse{
      border-color: rgba(255,122,26,.28);
      box-shadow: 0 0 0 0 rgba(255,122,26,0);
      animation: filePulse 1.6s ease-in-out infinite;
    }
    @keyframes filePulse{
      0%,100%{ box-shadow: 0 0 0 0 rgba(255,122,26,0); }
      50%{    box-shadow: 0 0 0 7px rgba(255,122,26,.14); }
    }

    /* APP TOPBAR */
    .topbar{
      position:sticky;top:0;z-index:120;
      backdrop-filter: blur(12px);
      background: rgba(5,5,9,.62);
      border-bottom:1px solid var(--line);
    }
    .topbar .inner{
      display:flex;align-items:center;justify-content:space-between;
      gap:14px;padding:12px 0;
    }
    .brand{
      display:flex;align-items:center;gap:12px;
      min-width:260px;
    }

    .logo{
      width:38px;height:38px;border-radius:12px;
      overflow:hidden;
      background: rgba(0,0,0,.15);
      display:grid;
      place-items:center;
      box-shadow: 0 10px 30px rgba(255,122,26,.25);
    }
    .logo img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    .brandText b{display:block;font-size:14px;letter-spacing:.2px}
    .brandText span{display:block;font-size:12px;color:var(--muted);margin-top:2px}
    .topActions{display:flex;align-items:center;gap:10px}

    @media (max-width:680px){
      .brand{display:none;}
      .topActions{
        width:100%;
        display:grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap:8px;
      }
      .topActions .btn{
        width:100%;
        justify-content:center;
        padding:10px 8px;
        font-size:12.5px;
      }
      .topActions .btn i{width:16px;height:16px}
    }

    .section{padding:18px 0}

    /* CABINET HEADER / GRID */
    .cabHead{padding:18px;border-radius:26px}

    .row2{
      display:grid;
      grid-template-columns: 320px 1fr;
      gap:14px;
      align-items:stretch;
      margin-top:14px;
    }

    .profileCard, .newsCard{
      border:1px solid var(--line);
      background: rgba(0,0,0,.22);
      border-radius:22px;
      padding:16px;
      overflow:hidden;
      position:relative;
      min-height: 100%;
    }

    .profileCard:before{
      content:"";
      position:absolute;inset:-2px;
      background:
        radial-gradient(400px 250px at 20% 0%, rgba(255,122,26,.22), transparent 60%),
        radial-gradient(420px 260px at 80% 15%, rgba(90,178,255,.18), transparent 60%);
      pointer-events:none;
      opacity:.9;
    }
    .profileInner{position:relative}

    .avatarBig{
      width:100%;
      aspect-ratio: 1/1;
      border-radius:22px;
      border:1px solid rgba(255,255,255,.14);
      overflow:hidden;
      background: rgba(0,0,0,.25);
      display:grid;place-items:center;
      box-shadow: 0 20px 80px rgba(0,0,0,.55);
    }
    .avatarBig img{width:100%;height:100%;object-fit:cover}
    .avatarBig .ph{
      font-weight:900;
      font-size:40px;
      color:rgba(255,255,255,.86);
    }
    .profileName{
      margin-top:12px;
      font-weight:900;
      font-size:18px;
      letter-spacing:-.2px;
      text-align:center;
    }
    .profileMeta{
      margin-top:6px;
      text-align:center;
      color:var(--muted);
      font-size:12px;
      line-height:1.45;
    }

    .newsCard h3{
      margin:0;
      font-size:18px;
      letter-spacing:-.2px;
      display:flex;align-items:center;gap:10px;
    }
    .newsWrap{
      margin-top:10px;
      height:100%;
      display:flex;
      flex-direction:column;
    }
    .newsList{
      margin-top:10px;
      display:flex;
      flex-direction:column;
      gap:8px;
      overflow:auto;
      flex: 1;
      min-height: 0;
      padding-right:4px;
    }
    .newsItem{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      border-radius:14px;
      padding:10px 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      cursor:pointer;
      transition:.2s ease;
      user-select:none;
    }
    .newsItem:hover{transform:translateY(-1px);border-color:rgba(255,255,255,.18)}
    .newsItem span{
      display:block;
      font-weight:700;
      font-size:13px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 95%;
    }
    .newsItem i{width:16px;height:16px;opacity:.85}

    /* CATEGORIES */
    .catsHead{
      margin-top:14px;
      display:flex;align-items:flex-end;justify-content:space-between;gap:12px;
      flex-wrap:wrap;
    }
    .catsSub{color:var(--muted);margin-top:8px;line-height:1.55}
    .catsDesktop{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:14px;
      margin-top:14px;
    }
    .catsMobile{
      display:none;
      flex-direction:column;
      gap:10px;
      margin-top:12px;
    }
    .catCard{
      border:1px solid var(--line);
      background: rgba(255,255,255,.05);
      border-radius:22px;
      overflow:hidden;
      cursor:pointer;
      transition:.22s ease;
      position:relative;
      min-height:230px;
      display:flex;flex-direction:column;
      transform: translateZ(0);
    }
    .catCard:before{
      content:"";
      position:absolute;inset:-2px;
      background:
        radial-gradient(520px 260px at 20% 0%, rgba(255,122,26,.22), transparent 60%),
        radial-gradient(560px 280px at 90% 10%, rgba(90,178,255,.16), transparent 60%);
      opacity:0;
      transition:.25s ease;
      pointer-events:none;
    }
    .catCard:hover{
      transform: translateY(-4px) scale(1.01);
      border-color: rgba(255,255,255,.18);
    }
    .catCard:hover:before{opacity:1}
    .catArt{
      height:140px;
      background: rgba(0,0,0,.22);
      position:relative;
      overflow:hidden;
    }
    .catArt img{
      width:100%;height:100%;
      object-fit:cover;
      transform: scale(1.03);
      transition: .35s ease;
      filter: saturate(1.08) contrast(1.06);
    }
    .catCard:hover .catArt img{transform: scale(1.10)}
    .shine{
      position:absolute;inset:0;
      background: linear-gradient(120deg, transparent 0%, rgba(255,255,255,.16) 30%, transparent 60%);
      transform: translateX(-120%);
      pointer-events:none;
      opacity:0;
    }
    .catCard:hover .shine{
      opacity:.9;
      animation: shine 1.05s ease forwards;
    }
    @keyframes shine{to{ transform: translateX(120%); opacity:0; }}
    .catName{
      padding:12px 14px 0;
      font-weight:900;
      letter-spacing:.1px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .catName small{
      color:var(--muted);
      font-weight:800;
      font-size:12px;
      border:1px solid rgba(255,255,255,.10);
      padding:6px 10px;
      border-radius:999px;
      background: rgba(0,0,0,.18);
    }
    .catMeta{
      padding:10px 14px 14px;
      display:flex;gap:10px;flex-wrap:wrap;
      color:var(--muted);
      font-size:12px;
      line-height:1.45;
    }
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding:8px 10px;border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      color:var(--muted);
      font-size:12px;
    }
    .pill i{width:16px;height:16px;opacity:.85}
    .catChip{
      width:100%;
      display:flex;align-items:center;justify-content:space-between;
      gap:10px;
      padding:12px 14px;
      border-radius:16px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.05);
      cursor:pointer;
      transition:.2s ease;
    }
    .catChip:hover{border-color:rgba(255,255,255,.18)}
    .catChip .left{
      display:flex;align-items:center;gap:10px;
      color:var(--ink);
      font-weight:800;
    }
    .catChip small{color:var(--muted);font-weight:700}

    /* MODALS */
    .overlay{
      position:fixed;inset:0;
      background: rgba(0,0,0,.65);
      backdrop-filter: blur(10px);
      z-index:150;
    }
    .modal{
      position:fixed;inset:16px;
      z-index:160;
      display:flex;flex-direction:column;
      border-radius:24px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(16,18,32,.98), rgba(8,9,19,.96));
      box-shadow: 0 30px 90px rgba(0,0,0,.75);
      overflow:hidden;
    }
    .modalTop{
      display:flex;flex-direction:column;
      gap:8px;
      padding:10px;
      border-bottom:1px solid var(--line);
      background: rgba(0,0,0,.20);
    }
    .modalTitleRow{
      display:flex;align-items:center;justify-content:space-between;gap:10px;
    }
    .modalTitle{
      display:flex;align-items:center;gap:10px;
      font-weight:900;
      letter-spacing:-.2px;
    }
    .modalTitle b{
      font-size:15px;
      max-width:70vw;
      overflow:hidden;text-overflow:ellipsis;white-space:nowrap;
    }
    .iconBtn{
      display:inline-flex;align-items:center;gap:8px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.06);
      padding:10px 12px;
      border-radius:14px;
      cursor:pointer;
      transition:.2s ease;
      color:var(--ink);
      user-select:none;
      white-space:nowrap;
    }
    .iconBtn:hover{transform:translateY(-1px);border-color:rgba(255,255,255,.18)}
    .iconBtn i{width:18px;height:18px}

    .modalTools{
      width:100%;
      display:grid;
      grid-template-columns: 1fr 170px 170px 170px auto;
      gap:8px;
      align-items:center;
    }
    .modalTools .field{border-radius:14px;padding:8px 10px}
    .modalTools .field input,.modalTools .field select{font-size:13px}
    .modalBody{
      padding:14px;
      overflow:auto;
      flex:1;
    }
    .grid{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:12px;
    }
    .pCard{
      border:1px solid var(--line);
      background: rgba(255,255,255,.05);
      border-radius:18px;
      overflow:hidden;
      display:flex;flex-direction:column;
      min-height: 330px;
      position:relative;
    }
    .pHead{
      padding:12px 12px 0;
      display:flex;align-items:flex-start;justify-content:space-between;
      gap:10px;
    }
    .pTitle{
      font-weight:900;
      font-size:13px;
      line-height:1.25;
      color:var(--ink);
      display:-webkit-box;
      -webkit-line-clamp:2;
      -webkit-box-orient:vertical;
      overflow:hidden;
    }

    /* ‚úÖ Copy mini ‚Äî accent like primary button */
    .copyMini{
      flex:0 0 auto;
      width:36px;height:36px;
      border-radius:12px;
      display:grid;place-items:center;
      cursor:pointer;
      user-select:none;
      transition:.2s ease;
      position:relative;

      border:1px solid rgba(255,122,26,.28);
      background: linear-gradient(135deg, rgba(255,122,26,.20), rgba(0,0,0,.22));
      box-shadow: 0 10px 26px rgba(255,122,26,.14);
      color: rgba(255,210,170,.95);
    }
    .copyMini::before{
      content:"";
      position:absolute;
      inset:6px;
      border-radius:10px;
      background: rgba(0,0,0,.18);
      filter: blur(.2px);
      opacity:.9;
    }
    .copyMini i{width:16px;height:16px;opacity:1;position:relative;z-index:1}
    .copyMini:hover{
      transform:translateY(-1px);
      border-color: rgba(255,122,26,.42);
      box-shadow: 0 14px 34px rgba(255,122,26,.22);
    }
    .copyMini:active{
      transform:translateY(0);
      box-shadow: 0 8px 18px rgba(255,122,26,.16);
    }

    .pImg{
      margin:10px 12px 0;
      border-radius:14px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      height:150px;
      background: rgba(0,0,0,.20);
    }
    .pImg img{width:100%;height:100%;object-fit:cover}
    .pPriceRow{
      display:flex;align-items:center;justify-content:space-between;
      gap:10px;
      padding:10px 12px 0;
    }
    .price{
      font-weight:900;
      color:transparent;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      -webkit-background-clip:text;background-clip:text;
      font-size:14px;
    }
    .pDesc{
      padding:10px 12px 14px;
      color:var(--muted);
      font-size:12px;
      line-height:1.45;
      display:-webkit-box;
      -webkit-line-clamp:3;
      -webkit-box-orient:vertical;
      overflow:hidden;
      min-height:54px;
    }
    .empty{
      padding:22px;
      border:1px dashed rgba(255,255,255,.18);
      border-radius:18px;
      color:var(--muted);
      text-align:center;
    }

    /* ADS */
    .adsGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:14px;
      margin-top:14px;
    }
    .adsCard{
      border:1px solid var(--line);
      background: rgba(0,0,0,.22);
      border-radius:22px;
      padding:16px;
      overflow:hidden;
    }
    .adsCard h3{
      margin:0;
      font-size:18px;
      letter-spacing:-.2px;
      display:flex;align-items:center;gap:10px;
    }
    .adsList{
      margin-top:12px;
      display:grid;
      gap:8px;
    }
    .adsLink{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      border-radius:14px;
      padding:10px 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      cursor:pointer;
      transition:.2s ease;
      user-select:none;
    }
    .adsLink:hover{transform:translateY(-1px);border-color:rgba(255,255,255,.18)}
    .adsLink span{
      font-weight:800;
      font-size:13px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 90%;
    }
    .adsLink i{width:16px;height:16px;opacity:.85}

    /* FOOTER */
    footer{
      margin-top:16px;
      padding:18px 0 26px;
    }
    .foot{
      border:1px solid var(--line);
      background: rgba(0,0,0,.22);
      border-radius:24px;
      padding:16px;
      display:grid;
      grid-template-columns: 1.2fr 1fr 1fr;
      gap:14px;
    }
    .foot h4{margin:0;font-size:14px;letter-spacing:-.1px}
    .foot .muted{margin-top:8px;font-size:12px}
    .footLinks{margin-top:10px;display:grid;gap:8px}
    .footLinks a{
      display:flex;align-items:center;justify-content:space-between;
      padding:10px 12px;border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      transition:.2s ease;
    }
    .footLinks a:hover{transform:translateY(-1px);border-color:rgba(255,255,255,.18)}
    .footLinks i{width:16px;height:16px;opacity:.85}
    .toolsRow{margin-top:10px;display:flex;gap:10px;flex-wrap:wrap}
    .copyright{
      margin-top:10px;
      color:var(--muted);
      font-size:12px;
      text-align:center;
    }

    
    /* AI modal on top */
#aiOverlay{ z-index: 245; background: rgba(0,0,0,.72); backdrop-filter: blur(12px); }
#aiModal{ z-index: 255; }

.aiHero{
  display:grid;
  grid-template-columns: 180px 1fr;
  gap:16px;
  align-items:start;
}

.aiArt{
  width:180px;
  display:flex;
  justify-content:center;
  align-items:flex-start;
}
.aiArt img{
  width:100%;
  height:auto;
  filter: drop-shadow(0 18px 40px rgba(0,0,0,.35));
  user-select:none;
  pointer-events:none;
}

@media (max-width:680px){
  .aiHero{
    grid-template-columns: 96px 1fr; /* –±—ã–ª–æ 1fr */
    gap:12px;
    align-items:start;
  }
  .aiArt{
    width:96px; /* –±—ã–ª–æ 120px */
  }
}


    
    
    /* ORDER MODAL (higher z-index than category modal) */
    #orderOverlay{ z-index: 175; }
    #orderModal{ z-index: 185; }

    /* CABINET HOW modal (highest) */
    #cabHelpOverlay{
      z-index: 230;
      background: rgba(0,0,0,.72);
      backdrop-filter: blur(12px);
    }
    #cabHelpModal{ z-index: 240; }

    /* ORDER TIP (over order modal) */
    #orderTipOverlay{
      z-index: 195;
      background: rgba(0,0,0,.72);
      backdrop-filter: blur(12px);
    }
    #orderTipModal{
      z-index: 205;
      position:fixed;
      inset: 18px;
      display:flex;
      align-items:center;
      justify-content:center;
      pointer-events:none;
    }
    .tipCard{
      pointer-events:auto;
      width:min(860px, calc(100% - 24px));
      border:1px solid rgba(255,255,255,.14);
      background: rgba(12,12,18,.92);
      border-radius:22px;
      box-shadow: 0 30px 90px rgba(0,0,0,.75);
      padding:16px;
    }
    .tipHead{
      display:flex;align-items:center;justify-content:space-between;gap:10px;
    }
    .tipHead b{
      font-size:16px;letter-spacing:-.2px;
      display:flex;align-items:center;gap:8px;
    }
    .tipText{
      margin-top:10px;
      color:var(--muted);
      line-height:1.55;
      font-size:13px;
      white-space:pre-line;
    }

    /* order form layout */
    .oGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      margin-top:10px;
    }
    .oRow{
      display:grid;
      grid-template-columns: 1fr;
      gap:8px;
      margin-top:10px;
    }
    .oLabel{
      display:flex;align-items:center;gap:10px;
      font-weight:800;
      font-size:13px;
    }
    .helpBtn{
      width:26px;height:26px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      display:grid;place-items:center;
      cursor:pointer;
      transition:.2s ease;
    }
    .helpBtn:hover{transform:translateY(-1px);border-color:rgba(255,255,255,.20)}
    .helpBtn i{width:16px;height:16px;opacity:.9}

    .oActions{
      display:flex;gap:10px;flex-wrap:wrap;
      margin-top:12px;
    }
    .oActions .btn{flex:1}

    /* ‚úÖ Dark dropdown styling (select options) */
    .field select{
      color: var(--ink);
      background: transparent;
      color-scheme: dark;
    }
    .field select option,
    .field select optgroup{
      background: var(--ddBg);
      color: var(--ink);
    }
    .field select option:checked{
      background: var(--ddBg2);
    }

    /* ‚úÖ CABINET HOW content (infographic) */
    .howHero{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      margin-bottom:12px;
    }
    .howHeroCard{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      border-radius:18px;
      padding:14px;
    }
    .howHeroCard h3{
      margin:0 0 10px;
      display:flex;align-items:center;gap:10px;
      font-size:16px;
      letter-spacing:-.2px;
    }
    .howHeroCard h3 i{width:18px;height:18px}
    .howSteps{margin:0;padding-left:18px;color:var(--muted);line-height:1.6}
    .howSteps b{color:var(--ink)}
    .howBullets{margin:0;padding-left:18px;color:var(--muted);line-height:1.6}
    .howBullets b{color:var(--ink)}

    .howGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    .howCard{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.20);
      border-radius:18px;
      padding:14px;
    }
    .howCard h4{
      margin:0 0 8px;
      display:flex;align-items:center;gap:10px;
      font-size:14px;
    }
    .howCard h4 i{width:18px;height:18px}
    .howCard p{margin:0}

    .howMini{margin-top:10px;display:flex;gap:8px;flex-wrap:wrap}
    .tag{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      color:var(--muted);
      padding:6px 10px;
      border-radius:999px;
      font-size:12px;
      font-weight:700;
    }
    .howFooterNote{
      margin-top:12px;
      border:1px solid rgba(255,122,26,.20);
      background: linear-gradient(135deg, rgba(255,122,26,.10), rgba(0,0,0,.18));
      border-radius:18px;
      padding:12px 14px;
      display:flex;gap:10px;align-items:flex-start;
      color:var(--muted);
    }
    .howFooterNote i{width:18px;height:18px;color:rgba(255,210,170,.95);margin-top:1px}
    .howFooterNote b{color:var(--ink)}

.profileActions{
  margin-top:12px; /* –æ—Ç—Å—Ç—É–ø –æ—Ç —Ç–µ–∫—Å—Ç–∞ */
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
    
/* =========================
   QUICK NAV (–ü–ö / –ú–æ–±)
========================= */
.quickNav{ margin-top:14px; }

.quickGrid{
  display:grid;
  grid-template-columns: repeat(4, minmax(0,1fr));
  gap:12px;
}

.qCard{
  border:1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.05);
  border-radius:18px;
  padding:12px;
  cursor:pointer;
  text-align:left;
  color:var(--ink);
  transition:.22s ease;
  display:grid;
  grid-template-columns: 40px 1fr;
  gap:10px;
  align-items:start;
  position:relative;
  overflow:hidden;
}

.qCard:hover{
  transform: translateY(-2px);
  border-color: rgba(255,255,255,.18);
}

.qCard::before{
  content:"";
  position:absolute; inset:-2px;
  background:
    radial-gradient(520px 260px at 20% 0%, rgba(255,122,26,.18), transparent 60%),
    radial-gradient(560px 280px at 90% 10%, rgba(90,178,255,.12), transparent 60%);
  opacity:0;
  transition:.25s ease;
  pointer-events:none;
}
.qCard:hover::before{opacity:1}

.qIcon{
  width:40px;height:40px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.20);
  display:grid;place-items:center;
}
.qIcon i{width:18px;height:18px;opacity:.9}

.qBody b{
  display:block;
  font-weight:900;
  letter-spacing:-.2px;
  font-size:13px;
  line-height:1.25;
}
.qBody span{
  display:block;
  margin-top:6px;
  color:var(--muted);
  font-size:12px;
  line-height:1.45;
}

.qGo{
  grid-column: 1 / -1;
  margin-top:10px;
  display:flex;align-items:center;justify-content:space-between;
  gap:10px;

  background: rgba(0,0,0,.18);
  border-radius:14px;
  padding:10px 10px;
  color:rgba(255,255,255,.92);
  font-weight:800;
  font-size:12px;
}
.qGo i{width:16px;height:16px;opacity:.9}

/* –ú–æ–±-–º–∏–Ω–∏ –∫–∞—Ä—Ç–æ—á–∫–∞ */
.quickMini{
  display:none;
  width:100%;
  margin-top:12px;
  border-radius:18px;
  padding:10px;
}

.miniLink{
  width:100%;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
  border-radius:14px;
  padding:11px 12px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  cursor:pointer;
  color:var(--ink);
  transition:.2s ease;
}

.miniLink:hover{border-color:rgba(255,255,255,.18)}
.miniLink i{width:16px;height:16px;opacity:.9}
.miniLink span{font-weight:800;font-size:12.5px}

/* –∞–¥–∞–ø—Ç–∏–≤: –Ω–∞ –ø–ª–∞–Ω—à–µ—Ç–µ 2 –∫–æ–ª–æ–Ω–∫–∏, –Ω–∞ –º–æ–± ‚Äî —Å–∫—Ä—ã—Ç—å —Å–µ—Ç–∫—É, –ø–æ–∫–∞–∑–∞—Ç—å –º–∏–Ω–∏ */
@media (max-width:1100px){
  .quickGrid{ grid-template-columns: repeat(2, minmax(0,1fr)); }
}
@media (max-width:680px){
  .quickGrid{ display:none; }
  .quickMini{ display:grid; gap:8px; }
}   
    
@media (max-width:680px){
  .quickMini{
    flex: 0 0 100%;   /* ‚úÖ –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é —Å—Ç—Ä–æ–∫—É –≤–Ω—É—Ç—Ä–∏ flex */
    width:100%;
  }
}


    @media (max-width:900px){
      .howHero{grid-template-columns:1fr}
      .howGrid{grid-template-columns:1fr}
    }

    /* responsive */
    @media (max-width:1100px){
      .row2{grid-template-columns: 1fr; }
      .grid{grid-template-columns: repeat(3, 1fr)}
      .modalTools{grid-template-columns: 1fr 160px 160px auto;}
      .adsGrid{grid-template-columns: 1fr;}
      .foot{grid-template-columns: 1fr; }
    }
    @media (max-width:900px){
      .catsDesktop{grid-template-columns: repeat(2, 1fr)}
      .grid{grid-template-columns: repeat(2, 1fr)}
    }
    @media (max-width:680px){
      .loginInner{grid-template-columns:1fr}
      .catsDesktop{display:none}
      .catsMobile{display:flex}
      .modal{inset:10px;border-radius:20px}
      .grid{grid-template-columns: 1fr}
      .modalTools{grid-template-columns: 1fr auto;}
      .iconBtn{
        padding:10px 10px;
        border-radius:14px;
        font-size:0;
        gap:0;
      }
      .iconBtn i{margin:0}
      .oGrid{grid-template-columns: 1fr;}
    }
  </style>
</head>

<body>
  <!-- Loader -->
  <div id="loader" class="loader hidden">
    <div class="spinner" aria-label="–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è"></div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast"></div>

  <!-- =========================
       LOGIN SCREEN
  ========================== -->
  <main id="loginPage" class="loginPage hidden">
    <section class="loginCard glass">
      <div class="loginInner">
        <div class="loginLeft">
          <div class="badge"><i data-lucide="shield-check"></i> Cabinet –¥–æ—Å—Ç—É–ø–Ω–∏–π –ø—ñ—Å–ª—è –≤—Ö–æ–¥—É</div>
          <h1 class="h1" style="margin-top:12px;">–ü–∞—Ä—Ç–Ω–µ—Ä—Å—å–∫–∏–π <span class="grad">–∫–∞–±—ñ–Ω–µ—Ç</span></h1>
          <p>
            –í–≤–µ–¥–∏ —ñ–º‚Äô—è, –∑–∞–≤–∞–Ω—Ç–∞–∂ –∞–≤–∞—Ç–∞—Ä ‚Äî —ñ –ø–æ–±–∞—á–∏—à –õ–ö: –ø—Ä–æ—Ñ—ñ–ª—å, –Ω–æ–≤–∏–Ω–∏, –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –∑ –∞–Ω—ñ–º–∞—Ü—ñ—è–º–∏,
            –º–æ–¥–∞–ª–∫–∏ –∑ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏ –π –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è–º, —Ç–∞ ‚Äú–∫—É–¥–∏ –≤–∏–∫–ª–∞–¥–∞—Ç–∏ —Ä–µ–∫–ª–∞–º—É‚Äù.
          </p>

          <div class="loginFeature">
            <div class="fItem"><i data-lucide="image"></i><div><b>–ê–≤–∞—Ç–∞—Ä —Ç–∞ —ñ–º‚Äô—è</b><span>–ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä—ñ (localStorage). –í –±—É–¥—å-—è–∫–∏–π –º–æ–º–µ–Ω—Ç –º–æ–∂–µ—à –≤–∏–π—Ç–∏.</span></div></div>
            <div class="fItem"><i data-lucide="layout-grid"></i><div><b>–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó –ø—Ä–µ–º—ñ—É–º</b><span>3√ó –ø–ª–∏—Ç–∫–∏ –Ω–∞ –ü–ö, —Å–ø–∏—Å–æ–∫ –Ω–∞ –º–æ–±. Shine, hover, –ø—Ä–µ–º—ñ—É–º —Å—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è.</span></div></div>
            <div class="fItem"><i data-lucide="copy"></i><div><b>–ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è –±–µ–∑ HTML</b><span>–û–ø–∏—Å –æ—á–∏—â–∞—î—Ç—å—Å—è –≤—ñ–¥ —Ç–µ–≥—ñ–≤ ‚Äî –∫–æ–ø—ñ—é—î—Ç—å—Å—è –ª–∏—à–µ —Ç–µ–∫—Å—Ç.</span></div></div>
          </div>
        </div>

        <div class="loginRight">
          <h3>–í—Ö—ñ–¥</h3>
          <div class="muted" style="margin-top:8px;">–ó–∞–ø–æ–≤–Ω–∏ –ø–æ–ª—è ‚Äî –ø—ñ—Å–ª—è —Ü—å–æ–≥–æ –≤—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è –∫–∞–±—ñ–Ω–µ—Ç.</div>

          <form id="loginForm" class="form">
            <div class="field attention">
              <i data-lucide="user"></i>
              <input id="loginName" type="text" placeholder="–í–∞—à–µ —ñ–º‚Äô—è (–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ)" required minlength="2" maxlength="40">
            </div>

            <div class="avatarPick">
              <div class="avatarPreview" id="loginAvatarPreview">
                <div class="ph" id="loginAvatarLetters">P</div>
              </div>

              <div class="avatarTools">
                <input id="loginAvatar" class="fileInput" type="file" accept="image/*">

                <label for="loginAvatar" class="filePick pulse" id="filePickBtn">
                  <i data-lucide="upload"></i>
                  <span class="filePickTitle">–û–±—Ä–∞—Ç–∏ —Ñ–æ—Ç–æ</span>
                  <span class="filePickMeta" id="filePickMeta">—Ñ–∞–π–ª –Ω–µ –≤–∏–±—Ä–∞–Ω–æ</span>
                </label>

                <div class="hint">–§–æ—Ç–æ –Ω–µ–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–µ. –Ø–∫—â–æ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—à ‚Äî –±—É–¥–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä –∑ –ª—ñ—Ç–µ—Ä–∞–º–∏.</div>
              </div>
            </div>

            <div class="loginActions">
              <button class="btn btnPrimary" type="submit"><i data-lucide="log-in"></i> –£–≤—ñ–π—Ç–∏</button>
              <button class="btn btnGhost" type="button" id="loginDemo"><i data-lucide="sparkles"></i> –î–µ–º–æ</button>
            </div>

            <div class="hint">–©–æ–± ‚Äú—Å–∫–∏–Ω—É—Ç–∏ –≤—Ö–æ–¥‚Äù ‚Äî –Ω–∞—Ç–∏—Å–Ω–∏ ‚Äú–í–∏–π—Ç–∏‚Äù –≤ –∫–∞–±—ñ–Ω–µ—Ç—ñ.</div>
          </form>
        </div>
      </div>
    </section>
  </main>

  <!-- =========================
       APP / CABINET
  ========================== -->
  <div id="app" class="hidden">
    <!-- Topbar -->
    <header class="topbar">
      <div class="wrap">
        <div class="inner">
          <div class="brand">
            <div class="logo">
              <img src="https://i.ibb.co/ZzjXJbCD/photo-2026-01-20-05-33-38.jpg" alt="Samostroy logo">
            </div>
            <div class="brandText">
              <b>Samostroy Partner Cabinet</b>
              <span>–ö–∞—Ç–∞–ª–æ–≥ ‚Ä¢ –Ω–æ–≤–∏–Ω–∏ ‚Ä¢ —Ä–µ–∫–ª–∞–º–∞ ‚Ä¢ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏</span>
            </div>
          </div>

          <nav class="topActions">
            <a class="btn btnPrimary" href="#" id="btnOrder"><i data-lucide="clipboard-plus"></i> –ó–∞–∫–∞–∑</a>
            <a class="btn btnBlue" href="#" id="btnTg"><i data-lucide="send"></i> –ú–µ–Ω–µ–¥–∂–µ—Ä</a>
            <a class="btn" href="#" id="btnShop"><i data-lucide="store"></i> –ú–∞–≥–∞–∑–∏–Ω</a>
          </nav>
        </div>
      </div>
    </header>

    <!-- Header section -->
    <section class="section">
      <div class="wrap">
        <div class="cabHead glass">
          <div style="display:flex;gap:12px;flex-wrap:wrap;align-items:flex-end;justify-content:space-between;">

            <div class="greetRow">
  <!-- —Å–ª–µ–≤–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞ -->
  <div class="greetArt">
    <img src="https://i.ibb.co/kVcbdN0j/unnamed-1-removebg-preview-removebg-preview.png" alt="" decoding="async">
  </div>

  <!-- —Å–ø—Ä–∞–≤–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–¥ –Ω–∏–º -->
  <div class="greetText">
    <h1 class="h1">–í—ñ—Ç–∞—î–º–æ, <span class="grad" id="cabUserName">–ü–∞—Ä—Ç–Ω–µ—Ä</span> </h1>

    <div class="muted greetSub">
      –ü—Ä–æ—Ñ—ñ–ª—å, –Ω–æ–≤–∏–Ω–∏, —Ç–æ–≤–∞—Ä–∏ –¥–ª—è –≤–∏–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è, —Å–∞–π—Ç–∏ –¥–ª—è —Ä–µ–∫–ª–∞–º–∏, —É—Å–µ –¥–ª—è –∑—Ä—É—á–Ω–æ—ó –ø—Ä–∞—Ü—ñ –∑ Samostroy Drop.
    </div>
    
    
    <!-- Quick navigation (–ü–ö: 3‚Äì4 –∫–∞—Ä—Ç–æ—á–∫–∏, –ú–æ–±: 1 –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è) -->
<div class="quickNav">
  <!-- –ü–ö -->
  <div class="quickGrid">
    <button type="button" class="qCard" id="navCats">
      <div class="qIcon"><i data-lucide="package"></i></div>
      <div class="qBody">
        <b>1200+ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –≤–∞—à–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∫–∞</b>
        <span>–û—Ç–∫—Ä–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –≤—ã–±–∏—Ä–∞–π —Ç–æ–≤–∞—Ä—ã –ø–æ–¥ —Å–≤–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è.</span>
      </div>
      <div class="qGo">–ö –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º <i data-lucide="arrow-down"></i></div>
    </button>

    <button type="button" class="qCard" id="navAds">
      <div class="qIcon"><i data-lucide="megaphone"></i></div>
      <div class="qBody">
        <b>–ú—ã —Å–æ–±—Ä–∞–ª–∏ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å–∞–π—Ç—ã –¥–ª—è –≤—ã–≥—Ä—É–∑–∫–∏</b>
        <span>–î–æ—Å–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∏ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã ‚Äî –≤—Å—ë –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ.</span>
      </div>
      <div class="qGo">–ö —Å–ø–∏—Å–∫–∞–º <i data-lucide="arrow-down"></i></div>
    </button>

    <button type="button" class="qCard" id="navAi">
      <div class="qIcon"><i data-lucide="sparkles"></i></div>
      <div class="qBody">
        <b>–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</b>
        <span>–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç, –ø–æ–¥—Å–∫–∞–∑–∫–∏, –æ–±—É—á–µ–Ω–∏–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è.</span>
      </div>
      <div class="qGo">–û—Ç–∫—Ä—ã—Ç—å <i data-lucide="external-link"></i></div>
    </button>

    <!-- 4-—è –∫–∞—Ä—Ç–æ—á–∫–∞ (–ø–æ –∂–µ–ª–∞–Ω–∏—é) -->
    <button type="button" class="qCard" id="navOrder">
      <div class="qIcon"><i data-lucide="clipboard-plus"></i></div>
      <div class="qBody">
        <b>–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ –∑–∞ 2 –º–∏–Ω—É—Ç—ã</b>
        <span>–ì–æ—Ç–æ–≤–∞—è —Ñ–æ—Ä–º–∞ ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä—É –≤ Telegram.</span>
      </div>
      <div class="qGo">–ó–∞–∫–∞–∑–∞—Ç—å <i data-lucide="arrow-right"></i></div>
    </button>
  </div>
  
  
</div>
  </div>
</div>
          </div>

          <div class="row2">
            <!-- profile left -->
            <div class="profileCard">
              <div class="profileInner">
                <div class="avatarBig" id="cabAvatar">
                  <div class="ph" id="cabAvatarLetters">PS</div>
                </div>
                <div class="profileName" id="cabNameUnder">–ü–∞—Ä—Ç–Ω–µ—Ä Samostroy</div>
                <div class="profileMeta">
                  <span id="cabMetaLine">–ü—Ä–æ—Ñ—ñ–ª—å –∑–±–µ—Ä–µ–∂–µ–Ω–æ –Ω–∞ —Ü—å–æ–º—É –ø—Ä–∏—Å—Ç—Ä–æ—ó</span>
                </div>
                <div style="display:flex;gap:10px;flex-wrap:wrap;">
                  <div class="profileActions">
                      <button class="btn btnGhost" id="btnEditProfile"><i data-lucide="image-plus"></i> –ó–º—ñ–Ω–∏—Ç–∏ —Ñ–æ—Ç–æ/—ñ–º‚Äô—è</button>
                      <button class="btn" id="btnLogout"><i data-lucide="log-out"></i> –í–∏–π—Ç–∏</button>
                  </div>

                    <!-- –ú–æ–± -->
  <div class="quickMini">
    <button type="button" class="miniLink" id="mNavCats">
      <i data-lucide="package"></i><span>1200+ —Ç–æ–≤–∞—Ä—ñ–≤ –¥–ª—è –≤–∞—Å</span><i data-lucide="arrow-down"></i>

    </button>
    <button type="button" class="miniLink" id="mNavAds">
      <i data-lucide="megaphone"></i><span> –î–µ —Ä–µ–∫–ª–∞–º—É–≤–∞—Ç–∏?</span><i data-lucide="arrow-down"></i>
    </button>
    <button type="button" class="miniLink" id="mNavAi">
      <i data-lucide="sparkles"></i><span>Ai - –∞—Å–∏—Å—Ç–µ–Ω—Ç</span><i data-lucide="arrow-right"></i>
    </button>
  </div>
            </div>
              </div>
            </div>

            <!-- news right -->
            <div class="newsCard">
              <h3><i data-lucide="newspaper"></i> –ù–æ–≤–∏–Ω–∏ –∫–æ–º–ø–∞–Ω—ñ—ó</h3>
              <div class="muted" style="margin-top:6px;">–ö–ª—ñ–∫–Ω–∏ –ø–æ –Ω–æ–≤–∏–Ω—ñ ‚Äî –≤—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è –ø–æ—Å–∏–ª–∞–Ω–Ω—è –∞–±–æ –ø—ñ–¥–∫–∞–∂–µ –¥—ñ—é.</div>
              <div class="newsWrap">
                <div class="newsList" id="newsList"></div>
              </div>
            </div>
          </div>

          <!-- categories -->
          <div class="catsHead" id="secCats">
            <div>
              <h2 class="h2" style="margin-top:8px;">–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó —Ç–æ–≤–∞—Ä—ñ–≤</h2>
              <div class="catsSub">
                –ù–∞ –ü–ö ‚Äî –ø–ª–∏—Ç–∫–∏ –∑ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏ (3 –≤ —Ä—è–¥). –ù–∞ –º–æ–± ‚Äî —Å–ø–∏—Å–æ–∫ —É —Å—Ç–æ–≤–ø—á–∏–∫.
                –°–≤–æ—ó –∫–∞—Ä—Ç–∏–Ω–∫–∏ —Å—Ç–∞–≤–∏—à —É <code>CATEGORY_IMAGES</code>.
              </div>
            </div>
            <div style="display:flex;gap:10px;flex-wrap:wrap;">
              <span class="pill"><i data-lucide="package"></i> XML</span>
              <span class="pill"><i data-lucide="filter"></i> –§—ñ–ª—å—Ç—Ä–∏</span>
              <span class="pill"><i data-lucide="copy"></i> –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è</span>
            </div>
          </div>

          <div id="catsDesktop" class="catsDesktop"></div>
          <div id="catsMobile" class="catsMobile"></div>
        </div>
      </div>
    </section>

    <!-- ADS -->
<section class="section" id="secAds">
  <div class="wrap">
    <div class="glass" style="padding:18px;">

          <div style="display:flex;align-items:flex-end;justify-content:space-between;gap:12px;flex-wrap:wrap;">
            <div>
              <h2 class="h2">–ö—É–¥–∏ –≤–∏–∫–ª–∞–¥–∞—Ç–∏ —Ä–µ–∫–ª–∞–º—É</h2>
              <div class="muted" style="margin-top:8px;">
                –ì–æ—Ç–æ–≤—ñ —Å–ø–∏—Å–∫–∏ –º–∞–π–¥–∞–Ω—á–∏–∫—ñ–≤. –ö–ª—ñ–∫ ‚Äî –≤—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è —Å–∞–π—Ç/–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞.
              </div>
            </div>
            <div style="display:flex;gap:10px;flex-wrap:wrap;">
              <button class="btn btnPrimary" id="btnCopyBoards"><i data-lucide="copy"></i> –ö–æ–ø—ñ—é–≤–∞—Ç–∏ –¥–æ—à–∫–∏</button>
              <button class="btn btnBlue" id="btnCopyMarkets"><i data-lucide="copy"></i> –ö–æ–ø—ñ—é–≤–∞—Ç–∏ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∏</button>
            </div>
          </div>

          <div class="adsGrid">
            <div class="adsCard">
              <h3><i data-lucide="megaphone"></i> –î–æ—à–∫–∏ –æ–≥–æ–ª–æ—à–µ–Ω—å</h3>
              <div class="muted" style="margin-top:6px;">–†–µ–∫–æ–º–µ–Ω–¥—É—î–º–æ –≤–∏–∫–ª–∞–¥–∞—Ç–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ + –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è.</div>
              <div class="adsList" id="boardsList"></div>
            </div>

            <div class="adsCard">
              <h3><i data-lucide="shopping-bag"></i> –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∏</h3>
              <div class="muted" style="margin-top:6px;">–ü—ñ–¥–∫–ª—é—á–∞–π —Ç–æ–≤–∞—Ä–∏ —á–µ—Ä–µ–∑ —Ñ—ñ–¥–∏/–∫–∞–±—ñ–Ω–µ—Ç–∏, —Ä–æ–±–∏ –∫–æ–Ω—Ç–µ–Ω—Ç.</div>
              <div class="adsList" id="marketsList"></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <div class="wrap">
        <div class="foot">
          <div>
            <h4>Samostroy Partner Cabinet</h4>
            <div class="muted">
              –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä—ñ–≤: –∫–∞—Ç–∞–ª–æ–≥ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è—Ö, –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö, —Å–ø–∏—Å–∫–∏ –º–∞–π–¥–∞–Ω—á–∏–∫—ñ–≤ –¥–ª—è —Ä–æ–∑–º—ñ—â–µ–Ω–Ω—è, —Ç–∞ —à–≤–∏–¥–∫—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è.
            </div>
            <div class="toolsRow">
              <button class="btn btnGhost" id="toolExportProfile"><i data-lucide="download"></i> –ï–∫—Å–ø–æ—Ä—Ç –ø—Ä–æ—Ñ—ñ–ª—é</button>
              <button class="btn btnGhost" id="toolClearCache"><i data-lucide="trash-2"></i> –û—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à</button>
            </div>
          </div>

          <div>
            <h4>–®–≤–∏–¥–∫—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è</h4>
            <div class="footLinks">
              <a href="#" id="footShop"><span>Samostroy.shop</span><i data-lucide="external-link"></i></a>
              <a href="#" id="footTg"><span>Telegram –º–µ–Ω–µ–¥–∂–µ—Ä</span><i data-lucide="send"></i></a>
              <a href="#" id="footCgpro"><span>CGPRO —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç</span><i data-lucide="sparkles"></i></a>
              <a href="#" id="footXml"><span>XML / products.xml</span><i data-lucide="file-code-2"></i></a>
            </div>
          </div>

          <div>
            <h4>–ü—ñ–¥–∫–∞–∑–∫–∏</h4>
            <div class="muted">
              1) –ö–∞—Ä—Ç–∏–Ω–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –∑–º—ñ–Ω—é—î—à —É <code>CATEGORY_IMAGES</code><br>
              2) –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó ‚Äî –∫–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞ —É <code>CATEGORY_KEYWORDS</code><br>
              3) –û–ø–∏—Å –∫–æ–ø—ñ—é—î—Ç—å—Å—è –±–µ–∑ HTML (—Ç—ñ–ª—å–∫–∏ —Ç–µ–∫—Å—Ç)
            </div>
            <div class="footLinks" style="margin-top:10px;">
              <a href="#" id="footHow"><span>–Ø–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—è</span><i data-lucide="help-circle"></i></a>
              <a href="#" id="footLogout"><span>–í–∏–π—Ç–∏</span><i data-lucide="log-out"></i></a>
            </div>
          </div>
        </div>

        <div class="copyright">
          ¬© <span id="year"></span> Samostroy ‚Ä¢ Partner tools
        </div>
      </div>
    </footer>

    <!-- Category modal -->
    <div id="catOverlay" class="overlay hidden"></div>
    <section id="catModal" class="modal hidden" aria-modal="true" role="dialog">
      <div class="modalTop">
        <div class="modalTitleRow">
          <div class="modalTitle">
            <i data-lucide="layout-grid"></i>
            <b id="modalCatTitle">–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</b>
          </div>

          <div style="display:flex;gap:8px;align-items:center">
            <button class="iconBtn" id="btnResetFilters" type="button"><i data-lucide="rotate-ccw"></i> –°–∫–∏–Ω—É—Ç–∏</button>
            <button class="iconBtn" id="btnCloseModal" type="button"><i data-lucide="x"></i> –ó–∞–∫—Ä–∏—Ç–∏</button>
          </div>
        </div>

        <div class="modalTools">
          <div class="field">
            <i data-lucide="search"></i>
            <input id="fSearch" type="text" placeholder="–ü–æ—à—É–∫ –ø–æ —Ç–æ–≤–∞—Ä–∞—Ö‚Ä¶" autocomplete="off">
          </div>

          <div class="field">
            <i data-lucide="hash"></i>
            <select id="fSort">
              <option value="rel">–°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è</option>
              <option value="priceAsc">–¶—ñ–Ω–∞ ‚Üë</option>
              <option value="priceDesc">–¶—ñ–Ω–∞ ‚Üì</option>
              <option value="titleAsc">–ù–∞–∑–≤–∞ A‚Üí–Ø</option>
              <option value="titleDesc">–ù–∞–∑–≤–∞ –Ø‚ÜíA</option>
            </select>
          </div>

          <div class="field">
            <i data-lucide="badge-dollar-sign"></i>
            <input id="fPriceFrom" type="number" min="0" placeholder="–¶—ñ–Ω–∞ –≤—ñ–¥">
          </div>

          <div class="field">
            <i data-lucide="badge-dollar-sign"></i>
            <input id="fPriceTo" type="number" min="0" placeholder="–¶—ñ–Ω–∞ –¥–æ">
          </div>

          <button class="iconBtn" id="btnCopyAllTitles" type="button"><i data-lucide="copy"></i> –ö–æ–ø—ñ—é–≤–∞—Ç–∏ –Ω–∞–∑–≤–∏</button>
        </div>
      </div>

      <div class="modalBody">
        <div id="modalGrid" class="grid"></div>
        <div id="modalEmpty" class="empty hidden">–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∑–∞ –≤–∞—à–∏–º–∏ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏.</div>
      </div>
    </section>

    <!-- CABINET HOW modal -->
    <div id="cabHelpOverlay" class="overlay hidden"></div>
    <section id="cabHelpModal" class="modal hidden" aria-modal="true" role="dialog">
      <div class="modalTop">
        <div class="modalTitleRow">
          <div class="modalTitle">
            <i data-lucide="help-circle"></i>
            <b>–Ø–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—è –ø–∞—Ä—Ç–Ω–µ—Ä—Å—å–∫–∏–º –∫–∞–±—ñ–Ω–µ—Ç–æ–º</b>
          </div>
          <button class="iconBtn" id="btnCloseCabHelp" type="button">
            <i data-lucide="x"></i> –ó–∞–∫—Ä–∏—Ç–∏
          </button>
        </div>

        <div class="muted" style="padding:0 2px;">
          –Ü–Ω—Ñ–æ–≥—Ä–∞—Ñ—ñ–∫–∞ + –¥–µ—Ç–∞–ª—å–Ω—ñ –∫—Ä–æ–∫–∏ –ø–æ –≤—Å—å–æ–º—É —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É (–∫–∞—Ç–∞–ª–æ–≥, –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è, –º–∞–π–¥–∞–Ω—á–∏–∫–∏, –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è).
        </div>
      </div>

      <div class="modalBody">
        <div class="howHero">
          <div class="howHeroCard">
            <h3><i data-lucide="zap"></i> –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç (60 —Å–µ–∫—É–Ω–¥)</h3>
            <ol class="howSteps">
              <li><b>–û–±–µ—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ—é</b> ‚Äî –Ω–∞ –ü–ö –ø–ª–∏—Ç–∫–∏ –∑ —Ñ–æ—Ç–æ, –Ω–∞ –º–æ–±—ñ–ª—å–Ω–æ–º—É —Å–ø–∏—Å–æ–∫.</li>
              <li><b>–£ –º–æ–¥–∞–ª—Ü—ñ</b> –∫–æ—Ä–∏—Å—Ç—É–π—Å—è –ø–æ—à—É–∫–æ–º, —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è–º —Ç–∞ —Ü—ñ–Ω–æ—é ‚Äú–≤—ñ–¥/–¥–æ‚Äù.</li>
              <li><b>–ö–æ–ø—ñ—é–π</b> –Ω–∞–∑–≤—É/—Ü—ñ–Ω—É/–ø–æ–≤–Ω–∏–π –æ–ø–∏—Å (–æ–ø–∏—Å –∫–æ–ø—ñ—é—î—Ç—å—Å—è –±–µ–∑ HTML).</li>
              <li><b>–ù–∏–∂—á–µ</b> ‚Äî –≥–æ—Ç–æ–≤—ñ –º–∞–π–¥–∞–Ω—á–∏–∫–∏ –¥–ª—è —Ä–µ–∫–ª–∞–º–∏ (–∫–ª—ñ–∫ ‚Üí –≤—ñ–¥–∫—Ä–∏–≤–∞—î —Å–∞–π—Ç).</li>
              <li><b>–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è</b> ‚Äî –∫–Ω–æ–ø–∫–∞ ‚Äú–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è‚Äù –∑–≤–µ—Ä—Ö—É: 2 –∫—Ä–æ–∫–∏ ‚Üí Telegram –º–µ–Ω–µ–¥–∂–µ—Ä—É.</li>
            </ol>
          </div>

          <div class="howHeroCard">
            <h3><i data-lucide="sparkles"></i> –ß–æ–º—É —Ü–µ –≤–∏–≥—ñ–¥–Ω–æ</h3>
            <ul class="howBullets">
              <li><b>–ï–∫–æ–Ω–æ–º—ñ—è —á–∞—Å—É:</b> –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –≤ 1 –∫–ª—ñ–∫, –±–µ–∑ —Ä—É—á–Ω–∏—Ö –ø—Ä–∞–≤–æ–∫.</li>
              <li><b>–ú–µ–Ω—à–µ –ø–æ–º–∏–ª–æ–∫:</b> –æ–ø–∏—Å –æ—á–∏—â–∞—î—Ç—å—Å—è ‚Üí –≤—Å—Ç–∞–≤–ª—è—î—Ç—å—Å—è ‚Äú—á–∏—Å—Ç–æ‚Äù —É –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è.</li>
              <li><b>–®–≤–∏–¥—à–µ –ø—Ä–æ–¥–∞–∂—ñ:</b> –º–∞–π–¥–∞–Ω—á–∏–∫–∏ –≤–∂–µ –∑—ñ–±—Ä–∞–Ω—ñ ‚Äî –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≥—É–≥–ª–∏—Ç–∏.</li>
              <li><b>–í—Å–µ –ø—ñ–¥ —Ä—É–∫–æ—é:</b> –ø—Ä–æ—Ñ—ñ–ª—å –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ ‚Üí —à–≤–∏–¥–∫–∏–π –≤—Ö—ñ–¥.</li>
              <li><b>–ü—Ä–æ—Ñ—ñ-—Ä—É—Ç–∏–Ω–∞:</b> 5‚Äì10 –æ–≥–æ–ª–æ—à–µ–Ω—å/–¥–µ–Ω—å + –æ–Ω–æ–≤–ª–µ–Ω–Ω—è ‚Üí —Å—Ç–∞–±—ñ–ª—å–Ω–∏–π –ø–æ—Ç—ñ–∫ –∑–∞—è–≤–æ–∫.</li>
            </ul>
          </div>
        </div>

        <div class="howGrid">
          <div class="howCard">
            <h4><i data-lucide="layout-grid"></i> –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó —Ç–∞ –∫–∞—Ç–∞–ª–æ–≥</h4>
            <p class="muted">–ù–∞—Ç–∏—Å–Ω–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ—é ‚Üí –≤—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è –º–æ–¥–∞–ª–∫–∞ –∑ —Ç–æ–≤–∞—Ä–∞–º–∏. –ö–∞—Ä—Ç–∏–Ω–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –∑–º—ñ–Ω—é—é—Ç—å—Å—è —É <code>CATEGORY_IMAGES</code>.</p>
            <div class="howMini">
              <span class="tag">–ü–ö: 3 –≤ —Ä—è–¥</span>
              <span class="tag">–ú–æ–±: —Å–ø–∏—Å–æ–∫</span>
              <span class="tag">–®–≤–∏–¥–∫–æ + –∫—Ä–∞—Å–∏–≤–æ</span>
            </div>
          </div>

          <div class="howCard">
            <h4><i data-lucide="filter"></i> –§—ñ–ª—å—Ç—Ä–∏ —Ç–∞ –ø–æ—à—É–∫</h4>
            <p class="muted">–ü–æ—à—É–∫ –ø–æ –Ω–∞–∑–≤—ñ, —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è, —Ñ—ñ–ª—å—Ç—Ä —Ü—ñ–Ω–∏ ‚Äú–≤—ñ–¥/–¥–æ‚Äù. –¶–µ –¥–æ–ø–æ–º–∞–≥–∞—î –∑–∞ —Å–µ–∫—É–Ω–¥–∏ –∑–Ω–∞—Ö–æ–¥–∏—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω–µ.</p>
            <div class="howMini">
              <span class="tag">–ü–æ—à—É–∫</span>
              <span class="tag">–¶—ñ–Ω–∞</span>
              <span class="tag">A‚Üí–Ø</span>
            </div>
          </div>

          <div class="howCard">
            <h4><i data-lucide="copy"></i> –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è</h4>
            <p class="muted">–ú–∞–ª–µ–Ω—å–∫—ñ —ñ–∫–æ–Ω–∫–∏ –∫–æ–ø—ñ—é—é—Ç—å –Ω–∞–∑–≤—É/—Ü—ñ–Ω—É. –í–µ–ª–∏–∫–∞ –∫–Ω–æ–ø–∫–∞ ‚Äî –ø–æ–≤–Ω–∏–π –æ–ø–∏—Å (–±–µ–∑ HTML). –ü—ñ—Å–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∑‚Äô—è–≤–∏—Ç—å—Å—è Toast.</p>
            <div class="howMini">
              <span class="tag">–ë–µ–∑ HTML</span>
              <span class="tag">1 –∫–ª—ñ–∫</span>
              <span class="tag">Toast ‚úÖ</span>
            </div>
          </div>

          <div class="howCard">
            <h4><i data-lucide="megaphone"></i> –î–µ —Ä–µ–∫–ª–∞–º—É–≤–∞—Ç–∏—Å—å</h4>
            <p class="muted">–ù–∏–∂—á–µ ‚Äî –¥–æ—à–∫–∏ + –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∏. –ö–ª—ñ–∫ –≤—ñ–¥–∫—Ä–∏–≤–∞—î –ø–ª–∞—Ç—Ñ–æ—Ä–º—É. –Ñ –∫–Ω–æ–ø–∫–∏ ‚Äú–ö–æ–ø—ñ—é–≤–∞—Ç–∏ —Å–ø–∏—Å–∫–∏‚Äù.</p>
            <div class="howMini">
              <span class="tag">OLX</span>
              <span class="tag">Prom</span>
              <span class="tag">Rozetka</span>
              <span class="tag">Facebook</span>
            </div>
          </div>

          <div class="howCard">
            <h4><i data-lucide="clipboard-plus"></i> –°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h4>
            <p class="muted">–ö–Ω–æ–ø–∫–∞ ‚Äú–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è‚Äù ‚Üí 2 –∫—Ä–æ–∫–∏ (–ø–∞—Ä—Ç–Ω–µ—Ä ‚Üí –∫–ª—ñ—î–Ω—Ç/–¥–æ—Å—Ç–∞–≤–∫–∞) ‚Üí Telegram –º–µ–Ω–µ–¥–∂–µ—Ä—É –∑ –≥–æ—Ç–æ–≤–∏–º —Ç–µ–∫—Å—Ç–æ–º.</p>
            <div class="howMini">
              <span class="tag">2 –∫—Ä–æ–∫–∏</span>
              <span class="tag">Telegram</span>
              <span class="tag">–®–≤–∏–¥–∫–æ</span>
            </div>
          </div>

          <div class="howCard">
            <h4><i data-lucide="download"></i> –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏</h4>
            <p class="muted">–£ —Ñ—É—Ç–µ—Ä—ñ —î ‚Äú–ï–∫—Å–ø–æ—Ä—Ç –ø—Ä–æ—Ñ—ñ–ª—é‚Äù (json) —Ç–∞ ‚Äú–û—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à‚Äù. –¶–µ –∑—Ä—É—á–Ω–æ –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å—ñ–≤/—Å–∫–∏–¥–∞–Ω–Ω—è.</p>
            <div class="howMini">
              <span class="tag">–ï–∫—Å–ø–æ—Ä—Ç</span>
              <span class="tag">–ö–µ—à</span>
              <span class="tag">–ö–æ–Ω—Ç—Ä–æ–ª—å</span>
            </div>
          </div>
        </div>

        <div class="howFooterNote">
          <i data-lucide="thumbs-up"></i>
          <div>
            <b>–ú—ñ–Ω—ñ-—Å—Ç—Ä–∞—Ç–µ–≥—ñ—è –Ω–∞ 7 –¥–Ω—ñ–≤:</b> —â–æ–¥–Ω—è 5‚Äì10 –æ–≥–æ–ª–æ—à–µ–Ω—å + 2‚Äì3 —Ä—ñ–∑–Ω—ñ –∑–∞–≥–æ–ª–æ–≤–∫–∏ (A/B —Ç–µ—Å—Ç),
            –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ä–∏—Ö –æ–≥–æ–ª–æ—à–µ–Ω—å, —ñ —Å—Ç–∞–±—ñ–ª—å–Ω–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–π —à–≤–∏–¥–∫–æ ‚Äî —Ç–∞–∫ —Ç–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —à–≤–∏–¥–∫–æ ‚Äú—Ä–æ–∑–∫—Ä—É—Ç–∏—à‚Äù –ø—Ä–æ–¥–∞–∂—ñ.
          </div>
        </div>
      </div>
    </section>

    <!-- ‚úÖ ORDER MODAL -->
    <div id="orderOverlay" class="overlay hidden"></div>
    <section id="orderModal" class="modal hidden" aria-modal="true" role="dialog">
      <div class="modalTop">
        <div class="modalTitleRow">
          <div class="modalTitle">
            <i data-lucide="clipboard-plus"></i>
            <b>–°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</b>
          </div>

          <div style="display:flex;gap:8px;align-items:center">
            <button class="iconBtn" id="btnOrderClose" type="button"><i data-lucide="x"></i> –ó–∞–∫—Ä–∏—Ç–∏</button>
          </div>
        </div>

        <div class="muted" id="orderStepHint" style="margin-top:2px;">
          –ö—Ä–æ–∫ 1/2 ‚Äî –¥–∞–Ω—ñ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ (–≤–∞—à—ñ).
        </div>
      </div>

      <div class="modalBody">
        <!-- step 1 -->
        <div id="orderStep1">
          <div class="oRow">
            <div class="oLabel">–í–∞—à–µ —ñ–º‚Äô—è (–ø–∞—Ä—Ç–Ω–µ—Ä)</div>
            <div class="field"><i data-lucide="user"></i>
              <input id="oPartnerName" type="text" placeholder="–í–∞—à–µ —ñ–º‚Äô—è" minlength="2" maxlength="60" required>
            </div>
          </div>

          <div class="oRow">
            <div class="oLabel">–í–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω</div>
            <div class="field"><i data-lucide="phone"></i>
              <input id="oPartnerPhone" type="tel" placeholder="+380..." maxlength="30" required>
            </div>
            <div class="hint">–¶—ñ –¥–∞–Ω—ñ –ø—ñ–¥—É—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä—É —Ä–∞–∑–æ–º —ñ–∑ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è–º.</div>
          </div>

          <div class="oActions">
            <button class="btn btnPrimary" id="btnOrderNext" type="button"><i data-lucide="check-circle-2"></i> –î–∞–ª—ñ</button>
            <button class="btn btnGhost" id="btnOrderCancel1" type="button"><i data-lucide="x-circle"></i> –°–∫–∞—Å—É–≤–∞—Ç–∏</button>
          </div>
        </div>

        <!-- step 2 -->
        <div id="orderStep2" class="hidden">
          <div class="muted">–ö—Ä–æ–∫ 2/2 ‚Äî –¥–∞–Ω—ñ –∫–ª—ñ—î–Ω—Ç–∞ —Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∞.</div>

          <div class="oGrid">
            <div>
              <div class="oLabel">–ü—Ä—ñ–∑–≤–∏—â–µ</div>
              <div class="field"><i data-lucide="id-card"></i>
                <input id="oClientLast" type="text" placeholder="–ü—Ä—ñ–∑–≤–∏—â–µ" required>
              </div>
            </div>
            <div>
              <div class="oLabel">–Ü–º‚Äô—è</div>
              <div class="field"><i data-lucide="id-card"></i>
                <input id="oClientFirst" type="text" placeholder="–Ü–º‚Äô—è" required>
              </div>
            </div>
          </div>

          <div class="oRow">
            <div class="oLabel">–¢–µ–ª–µ—Ñ–æ–Ω –∫–ª—ñ—î–Ω—Ç–∞</div>
            <div class="field"><i data-lucide="phone"></i>
              <input id="oClientPhone" type="tel" placeholder="+380..." maxlength="30" required>
            </div>
          </div>

          <div class="oGrid">
            <div>
              <div class="oLabel">–ú—ñ—Å—Ç–æ</div>
              <div class="field"><i data-lucide="map-pin"></i>
                <input id="oCity" type="text" placeholder="–ù–∞–ø—Ä. –ö–∏—ó–≤" required>
              </div>
            </div>
            <div>
              <div class="oLabel">–ü–æ—à—Ç–∞</div>
              <div class="field"><i data-lucide="truck"></i>
                <select id="oCarrier" required>
                  <option value="–ù–æ–≤–∞ –ü–æ—à—Ç–∞">–ù–æ–≤–∞ –ü–æ—à—Ç–∞</option>
                  <option value="–£–∫—Ä–ø–æ—à—Ç–∞">–£–∫—Ä–ø–æ—à—Ç–∞</option>
                  <option value="Meest">Meest</option>
                </select>
              </div>
            </div>
          </div>

          <div class="oRow">
            <div class="oLabel">–ù–æ–º–µ—Ä –≤—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è</div>
            <div class="field"><i data-lucide="home"></i>
              <input id="oBranch" type="text" placeholder="–ù–∞–ø—Ä. 12" required>
            </div>
          </div>

          <div class="oGrid">
            <div>
              <div class="oLabel">
                –¢–æ–≤–∞—Ä
                <button class="helpBtn" id="btnHelp" type="button" title="–ü—ñ–¥–∫–∞–∑–∫–∞">
                  <i data-lucide="help-circle"></i>
                </button>
              </div>
              <div class="field"><i data-lucide="package"></i>
                <input id="oProduct" type="text" placeholder="–í—Å—Ç–∞–≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–æ–≤–∞—Ä—É –∑ –∞—Ä—Ç–∏–∫—É–ª–æ–º" required>
              </div>
            </div>

            <div>
              <div class="oLabel">–¶—ñ–Ω–∞ –ø—Ä–æ–¥–∞–∂—É</div>
              <div class="field"><i data-lucide="badge-dollar-sign"></i>
                <input id="oSalePrice" type="number" min="0" placeholder="–ù–∞–ø—Ä. 999" required>
              </div>
            </div>
          </div>

          <div class="oRow">
            <div class="oLabel">–î–æ–¥–∞—Ç–∫–æ–≤–æ (—É—Ç–æ—á–Ω–µ–Ω–Ω—è)</div>
            <div class="field"><i data-lucide="message-square"></i>
              <textarea id="oNotes" rows="3" placeholder="–ö–æ–ª—ñ—Ä, —Ä–æ–∑–º—ñ—Ä, –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ‚Ä¶"></textarea>
            </div>
          </div>

          <div class="oActions">
            <button class="btn btnGhost" id="btnOrderBack" type="button"><i data-lucide="arrow-left"></i> –ù–∞–∑–∞–¥</button>
            <button class="btn btnPrimary" id="btnOrderSend" type="button"><i data-lucide="send"></i> –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –≤ Telegram</button>
          </div>
        </div>
      </div>
    </section>

    <!-- ‚úÖ ORDER TIP OVERLAY -->
    <div id="orderTipOverlay" class="overlay hidden"></div>
    <div id="orderTipModal" class="hidden">
      <div class="tipCard">
        <div class="tipHead">
          <b><i data-lucide="help-circle"></i> –ü—ñ–¥–∫–∞–∑–∫–∞: ‚Äú–¢–æ–≤–∞—Ä —ñ —Ü—ñ–Ω–∞ –ø—Ä–æ–¥–∞–∂—É‚Äù</b>
          <button class="iconBtn" id="btnHelpClose" type="button"><i data-lucide="x"></i> –ó–∞–∫—Ä–∏—Ç–∏</button>
        </div>
        <div class="tipText" id="helpText">
!–í–ê–ñ–õ–ò–í–û:
‚Ä¢ –≤–∫–∞–∂—ñ—Ç—å —Ü—ñ–Ω—É, –ø–æ —è–∫—ñ–π —Ç–∏ –ø—Ä–æ–¥–∞–ª–∏ —Ç–æ–≤–∞—Ä
‚Ä¢ —É –ø–æ–ª—ñ "–¢–æ–≤–∞—Ä" –≤—Å—Ç–∞–≤—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∑ —Å–∞–π—Ç—É, –¥–µ –≤ –∫—ñ–Ω—Ü—ñ —î –∞—Ä—Ç–∏–∫—É–ª (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ SW-00000748)
        </div>
      </div>
    </div>
    
    
    
    
    <!-- ‚úÖ AI MODAL (placeholder for future AI) -->
<div id="aiOverlay" class="overlay hidden"></div>
<section id="aiModal" class="modal hidden" aria-modal="true" role="dialog">
  <div class="modalTop">
    <div class="modalTitleRow">
      <div class="modalTitle">
        <i data-lucide="sparkles"></i>
        <b>AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –≤ –∫–∞–±–∏–Ω–µ—Ç–µ</b>
      </div>
      <button class="iconBtn" id="btnAiClose" type="button">
        <i data-lucide="x"></i> –ó–∞–∫—Ä–∏—Ç–∏
      </button>
    </div>

    <div class="muted" style="padding:0 2px;">
      –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–∞–∑–¥–µ–ª –¥–ª—è —É–º–Ω–æ–π –ø–æ–º–æ—â–∏: –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç, –ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ —Å–µ—Ä–≤–∏—Å–∞–º, –æ–±—É—á–µ–Ω–∏–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã.
    </div>
  </div>

  <div class="modalBody">
    <div class="aiHero">
      <div class="aiArt">
        <img src="https://i.ibb.co/kVcbdN0j/unnamed-1-removebg-preview-removebg-preview.png" alt="" decoding="async">
      </div>

      <div class="aiText">
        <h2 class="h2" style="margin:0;">–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤</h2>
        <div class="muted" style="margin-top:10px;">
          –í –±—É–¥—É—â–µ–º –∑–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è AI, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç:
          —É–ª—É—á—à–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏, —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏—è, –¥–∞–≤–∞—Ç—å –ø–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏,
          –ø–æ–¥–±–∏—Ä–∞—Ç—å —Ç–æ–≤–∞—Ä—ã –ø–æ–¥ –ø–ª–æ—â–∞–¥–∫–∏ –∏ —É—Å–∫–æ—Ä—è—Ç—å –∑–∞–ø—É—Å–∫.
        </div>

        <div class="howMini" style="margin-top:12px;">
          <span class="tag">–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç</span>
          <span class="tag">–ü–æ–¥—Å–∫–∞–∑–∫–∏</span>
          <span class="tag">–û–±—É—á–µ–Ω–∏–µ</span>
          <span class="tag">–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è</span>
        </div>

        <div class="howFooterNote" style="margin-top:12px;">
          <i data-lucide="info"></i>
          <div><b>–°–µ–π—á–∞—Å:</b> —ç—Ç–æ ‚Äú–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä‚Äù –ø–æ–¥ –±—É–¥—É—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª.</div>
        </div>
      </div>
    </div>
  </div>
</section>

    
    
    
    
  </div>

  <script>
    /* ============================================================
       0) STORAGE
       ‚úÖ FIX iPhone: fallback + safe save
    ============================================================ */
    const LS_PROFILE_KEY = 'samostroy_partner_profile_v2';
    const SS_PROFILE_KEY = 'samostroy_partner_profile_v2_ss';
    const __memStore = {};

    function storageSet(key, value){
      try{ localStorage.setItem(key, value); return { ok:true, where:'localStorage' }; }catch(e){}
      try{ sessionStorage.setItem(key, value); return { ok:true, where:'sessionStorage' }; }catch(e){}
      __memStore[key] = value;
      return { ok:false, where:'memory' };
    }
    function storageGet(key){
      try{ const v = localStorage.getItem(key); if(v) return v; }catch(e){}
      try{ const v = sessionStorage.getItem(key); if(v) return v; }catch(e){}
      return __memStore[key] || null;
    }
    function storageRemove(key){
      try{ localStorage.removeItem(key); }catch(e){}
      try{ sessionStorage.removeItem(key); }catch(e){}
      delete __memStore[key];
    }

    /* ============================================================
       1) GLOBAL
    ============================================================ */
    const TELEGRAM_USERNAME = 'manager_samostroy_shop';
    const XML_FEED_URL = 'products.xml';
    const CGPRO_URL = 'https://samostroy.shop/tools/CGPRO.html';

    function showToast(msg){
      const t = document.getElementById('toast');
      t.textContent = msg;
      t.classList.add('show');
      setTimeout(()=>t.classList.remove('show'), 1800);
    }
    function openTelegram(msg){
      const url = `https://t.me/${TELEGRAM_USERNAME}?text=${encodeURIComponent(msg)}`;
      window.open(url, '_blank');
    }
    function money(n){
      const x = Number(n || 0);
      return `${x.toLocaleString('uk-UA')} –≥—Ä–Ω`;
    }
    function escapeAttr(s){
      return String(s ?? '')
        .replaceAll('&','&amp;')
        .replaceAll('"','&quot;')
        .replaceAll('<','&lt;')
        .replaceAll('>','&gt;');
    }

    function smoothScrollToId(id){
      const el = document.getElementById(id);
      if(!el) return;

      const topbar = document.querySelector('.topbar');
      const offset = (topbar?.offsetHeight || 0) + 12;

      const y = el.getBoundingClientRect().top + window.pageYOffset - offset;
      window.scrollTo({ top: y, behavior: 'smooth' });
    }

    /* ============================================================
       2) CLEAN HTML => TEXT (copy & display)
    ============================================================ */
    function cleanHtmlToText(html){
      if(!html) return '';
      const div = document.createElement('div');
      div.innerHTML = String(html);

      div.querySelectorAll('li').forEach(li=>{
        li.innerHTML = `‚Ä¢ ${li.textContent.trim()}`;
      });
      div.querySelectorAll('p,div').forEach(el=>{
        el.insertAdjacentText('afterend', '\n');
      });
      div.querySelectorAll('br').forEach(br=> br.replaceWith('\n'));

      let text = div.textContent || '';
      text = text
        .replace(/\u00A0/g,' ')
        .replace(/[ \t]+\n/g,'\n')
        .replace(/\n{3,}/g,'\n\n')
        .trim();
      return text;
    }
    function normalizeDesc(full){
      return cleanHtmlToText(full).replace(/\r\n/g,'\n').trim();
    }
    function shortFromFull(full){
      const t = normalizeDesc(full);
      if(!t) return '–û–ø–∏—Å –∑ XML-–ø—Ä–∞–π—Å—É';
      return t.length > 140 ? (t.slice(0, 140).trim() + '‚Ä¶') : t;
    }
    function copyText(text){
  const s = String(text ?? '');
  if(navigator.clipboard && window.isSecureContext){
    navigator.clipboard.writeText(s).then(()=>{
      showToast('–°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ ‚úÖ');
    }).catch(()=>fallbackCopy(s));
  }else{
    fallbackCopy(s);
  }
}

function fallbackCopy(s){
  try{
    const ta = document.createElement('textarea');
    ta.value = s;
    ta.setAttribute('readonly', '');
    ta.style.position = 'fixed';
    ta.style.left = '-9999px';
    document.body.appendChild(ta);
    ta.select();
    document.execCommand('copy');
    document.body.removeChild(ta);
    showToast('–°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ ‚úÖ');
  }catch(e){
    showToast('–ù–µ –≤–¥–∞–ª–æ—Å—è —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏');
  }
}


    /* ============================================================
       3) CATEGORIES
    ============================================================ */
    const CATEGORY_KEYWORDS = [
      { name: '3D –ø–∞–Ω–µ–ª—ñ', keywords: ['3D –ø–∞–Ω–µ–ª—å', '–ü–∞–Ω–µ–ª—å —Å—Ç–µ–Ω—ñ–≤–∞', '3D', '–î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞ 3D –ø–∞–Ω–µ–ª—å', '–ü–∞–Ω–µ–ª—å —Å—Ç—ñ–Ω–æ–≤–∞', '–ü–∞–Ω–µ–ª—å-—Ä–µ–π–∫–∞', '–ü–∞–Ω–µ–ª—å —Ä–µ–π–∫–∞'] },
      { name: '–ü–í–• –ø–∞–Ω–µ–ª—ñ —ñ –ø–ª–∏—Ç–∏', keywords: ['–ü–í–• –ø–∞–Ω–µ–ª—å', '–ü–í–• –ø–ª–∏—Ç–∞', '–ü–í–•'] },
      { name: '–ü–æ–∫—Ä–∏—Ç—Ç—è –≤—ñ–Ω—ñ–ª–æ–≤–µ', keywords: ['–ü–æ–∫—Ä–∏—Ç—Ç—è –≤—ñ–Ω—ñ–ª–æ–≤–µ —Å–∞–º–æ–∫–ª–µ—é—á–µ'] },
      { name: '–ü–ª–∏—Ç–∫–∞', keywords: ['–í—ñ–Ω—ñ–ª–æ–≤–∞ –ø–ª–∏—Ç–∫–∞', '–í—ñ–Ω—ñ–ª–æ–≤–∞ –ø–ª–∏—Ç–∞', '–ü–í–• –ø–ª–∏—Ç–∫–∞', '–ü–æ–ª—ñ—É—Ä–µ—Ç–∞–Ω–æ–≤–∞ –ø–ª–∏—Ç–∫–∞', '–ê–ª—é–º—ñ–Ω—ñ—î–≤–∞ –ø–ª–∏—Ç–∫–∞', 'LVT –ø–ª–∏—Ç–∫–∞', '–ü–ª–∏—Ç–∫–∞ –ø—ñ–¥ –∫–æ–≤—Ä–æ–ª—ñ–Ω'] },
      { name: 'PET –ø–ª–∏—Ç–∫–∞', keywords: ['–°—Ç—ñ–Ω–æ–≤–∞ PET –ø–ª–∏—Ç–∫–∞', 'PET –º–æ–∑–∞—ñ–∫–∞', 'PET –ø–ª–∏—Ç–∫–∞ —É —Ä—É–ª–æ–Ω—ñ'] },
      { name: '–†–µ–π–∫–∏ –ø—Ä–æ—Ñ—ñ–ª—ñ —Ç–∞ –¥–µ–∫–æ—Ä', keywords: ['–ü—Ä–æ—Ñ—ñ–ª—å', '–†–µ–π–∫–∞ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞', '–ú–æ–ª–¥–∏–Ω–≥', '–º–æ–ª–¥–∏–Ω–≥', '–ú–æ–ª–¥–∏–Ω–≥–∏', '—Ä–µ–π–∫–∞', '–†–µ–π–∫–∞', '–ø–∞–Ω–µ–ª—å-—Ä–µ–π–∫–∞', '–ø–∞–Ω–µ–ª—å —Ä–µ–π–∫–∞', '–¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞ —Ä–µ–π–∫–∞', '–ü–ª—ñ–Ω—Ç—É—Å –†–†', '–ü–ª—ñ–Ω—Ç—É—Å –≤—ñ–Ω—ñ–ª–æ–≤–∏–π', '–ü–ª—ñ–Ω—Ç—É—Å'] },
      { name: '–ú–æ–ª–¥–∏–Ω–≥', keywords: ['–ú–æ–ª–¥–∏–Ω–≥', '–º–æ–ª–¥–∏–Ω–≥'] },
      { name: '–®—Ç—É–∫–∞—Ç—É—Ä–∫–∞ –≤ —Ä—É–ª–æ–Ω–∞—Ö', keywords: ['—à—Ç—É–∫–∞—Ç—É—Ä–∫–∞', '–®—Ç—É–∫–∞—Ç—É—Ä–∫–∞'] },
      { name: '–°–∞–º–æ–∫–ª–µ—é—á–∞ –ø–ª—ñ–≤–∫–∞', keywords: ['–ü–ª—ñ–≤–∫–∞ —Å–∞–º–æ–∫–ª–µ—é—á–∞', '–ü–ª—ñ–≤–∫–∞', '–ü–ª—ñ–≤–∫–∞ –≤—ñ–∫–æ–Ω–Ω–∞'] },
      { name: '–®–ø–∞–ª–µ—Ä–∏', keywords: ['–®–ø–∞–ª–µ—Ä–∏'] },
      { name: '–ü—ñ–¥–ª–æ–≥–∞-–ø–∞–∑–ª', keywords: ['–ü—ñ–¥–ª–æ–≥–∞ –ø–∞–∑–ª', '–ü—ñ–¥–ª–æ–≥–∞-–ø–∞–∑–ª', '–ü—ñ–¥–ª–æ–≥–∞-–ø–∞–∑–ª –ø–ª—é—à–µ–≤–∏–π'] },
      { name: '–ö–∏–ª–∏–º–∫–∏ —Ç–µ—Ä–º–æ (–¥–∏—Ç—è—á—ñ)', keywords: ['–ö–∏–ª–∏–º–æ–∫ –¥–∏—Ç—è—á–∏–π', '–¢–µ—Ä–º–æ–∫–∏–ª–∏–º–æ–∫', '–ö–∏–ª–∏–º–æ–∫', '–î–∏—Ç—è—á–∏–π'] },
      { name: '–î–∑–µ—Ä–∫–∞–ª–∞', keywords: ['–î–∑–µ—Ä–∫–∞–ª–æ', '–î–∑–µ—Ä–∫–∞–ª–∞', '–î–∑–µ—Ä–∫–∞–ª–æ –∞–∫—Ä–∏–ª–æ–≤–µ', '–î–∑–µ—Ä–∫–∞–ª—å–Ω–∏–π –¥–µ–∫–æ—Ä'] },
      { name: '–ú–µ–±–ª—ñ –¥–ª—è –¥–æ–º—É —Ç–∞ —Å–∞–¥—É', keywords: ['–ù–∞–±—ñ—Ä –º–µ–±–µ–ª—ñ–≤', '–ú–µ–±–ª—ñ', '–¢—É–º–±–∞', '–°—Ç–µ–ª–∞–∂', '–°—Ç—ñ–ª', '–ï—Ç–∞–∂–µ—Ä–∫–∞', '–ü–æ–ª–∏—Ü—è', '–®–∞—Ñ–∞', '–ö—Ä—ñ—Å–ª–æ', '–î–∏–≤–∞–Ω'] },
    ];

    function getCategoryFromTitle(title){
      const lower = (title || '').toLowerCase();
      for (const group of CATEGORY_KEYWORDS){
        for (const key of group.keywords){
          if(lower.includes(String(key).toLowerCase())) return group.name;
        }
      }
      return '–Ü–Ω—à–µ';
    }

    /* ============================================================
       4) CATEGORY IMAGES
    ============================================================ */
    const CATEGORY_IMAGES = {
      "3D –ø–∞–Ω–µ–ª—ñ": "https://i.ibb.co/CpNH3VS5/unnamed.png",
      "–ü–í–• –ø–∞–Ω–µ–ª—ñ —ñ –ø–ª–∏—Ç–∏": "https://i.ibb.co/wZXxPfvh/213124.png",
      "–ü–æ–∫—Ä–∏—Ç—Ç—è –≤—ñ–Ω—ñ–ª–æ–≤–µ": "https://i.ibb.co/qMR1C83H/2026-01-22-155456.png",
      "–ü–ª–∏—Ç–∫–∞": "https://i.ibb.co/twP9pMZ0/unnamed-1-1.png",
      "PET –ø–ª–∏—Ç–∫–∞": "https://i.ibb.co/xSj9QDvN/unnamed-1.png",
      "–†–µ–π–∫–∏ –ø—Ä–æ—Ñ—ñ–ª—ñ —Ç–∞ –¥–µ–∫–æ—Ä": "https://i.ibb.co/vvxkqgkX/image.png",
      "–ú–æ–ª–¥–∏–Ω–≥": "https://i.ibb.co/gMbbMxYj/345345-1-345.png",
      "–®—Ç—É–∫–∞—Ç—É—Ä–∫–∞ –≤ —Ä—É–ª–æ–Ω–∞—Ö": "https://i.ibb.co/sd5NLgbz/unnamed-2.jpg",
      "–°–∞–º–æ–∫–ª–µ—é—á–∞ –ø–ª—ñ–≤–∫–∞": "https://i.ibb.co/rGs6dDK7/unnamed.png",
      "–®–ø–∞–ª–µ—Ä–∏": "https://i.ibb.co/CpCYs6yP/unnamed-1.png",
      "–ü—ñ–¥–ª–æ–≥–∞-–ø–∞–∑–ª": "https://i.ibb.co/kgs5SLs0/2314521.png",
      "–ö–∏–ª–∏–º–∫–∏ —Ç–µ—Ä–º–æ (–¥–∏—Ç—è—á—ñ)": "https://i.ibb.co/Wpv6NpDk/2345235.png",
      "–î–∑–µ—Ä–∫–∞–ª–∞": "https://i.ibb.co/wZwZq5gs/unnamed-1.png",
      "–ú–µ–±–ª—ñ –¥–ª—è –¥–æ–º—É —Ç–∞ —Å–∞–¥—É": "https://i.ibb.co/F4mR1L0N/unnamed2344.png",
      "–Ü–Ω—à–µ": "https://i.ibb.co/h1CBZJzW/unnamed-2.png",
    };
    function getCategoryImage(name){
      return CATEGORY_IMAGES[name] || "https://via.placeholder.com/900x520?text=Category";
    }

    /* ============================================================
       5) PRODUCTS (default + xml)
    ============================================================ */
    const DEFAULT_PRODUCTS = [
      {
        id: 1,
        title: '–ú–æ–ª–¥–∏–Ω–≥ —Å–∞–º–æ–∫–ª–µ–π–Ω–∏–π 3000√ó8√ó4–º–º (–±—ñ–ª–∏–π)',
        category: getCategoryFromTitle('–ú–æ–ª–¥–∏–Ω–≥ —Å–∞–º–æ–∫–ª–µ–π–Ω–∏–π 3000√ó8√ó4–º–º (–±—ñ–ª–∏–π)'),
        price: 149,
        sku: 'MLD-3000-804-W',
        img: 'https://i.ibb.co/PZGTwyqp/unnamed.jpg',
        unit: '—à—Ç',
        full: `–ú–æ–ª–¥–∏–Ω–≥ ‚Äì —Ü–µ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∏–π –µ–ª–µ–º–µ–Ω—Ç —ñ–Ω—Ç–µ—Ä'—î—Ä—É.\n–†–æ–∑–º—ñ—Ä: 3000√ó8√ó4–º–º\n‚Ä¢ –õ–µ–≥–∫–∏–π –º–æ–Ω—Ç–∞–∂\n‚Ä¢ –ï—Å—Ç–µ—Ç–∏—á–Ω–∏–π –≤–∏–≥–ª—è–¥\n‚Ä¢ –õ–µ–≥–∫—ñ—Å—Ç—å –¥–æ–≥–ª—è–¥—É`
      },
      {
        id: 2,
        title: '–†–µ–π–∫–∞ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞ 3D (—á–æ—Ä–Ω–∞) 2.7–º',
        category: getCategoryFromTitle('–†–µ–π–∫–∞ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞ 3D (—á–æ—Ä–Ω–∞) 2.7–º'),
        price: 329,
        sku: 'REIKA-27-B',
        img: 'https://i.ibb.co/PZGTwyqp/unnamed.jpg',
        unit: '—à—Ç',
        full: `–î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞ —Ä–µ–π–∫–∞ –¥–ª—è —Å—É—á–∞—Å–Ω–∏—Ö —ñ–Ω—Ç–µ—Ä'—î—Ä—ñ–≤.\n‚Ä¢ –®–≤–∏–¥–∫–∏–π –º–æ–Ω—Ç–∞–∂\n‚Ä¢ –ê–∫—Ü–µ–Ω—Ç–Ω–∞ —Å—Ç—ñ–Ω–∞\n‚Ä¢ –°—Ç–∏–ª—å–Ω–∏–π 3D –µ—Ñ–µ–∫—Ç`
      },
      {
        id: 3,
        title: '–®—Ç—É–∫–∞—Ç—É—Ä–∫–∞ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞ ‚ÄúStone‚Äù 5–∫–≥',
        category: getCategoryFromTitle('–®—Ç—É–∫–∞—Ç—É—Ä–∫–∞ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞ ‚ÄúStone‚Äù 5–∫–≥'),
        price: 399,
        sku: 'STU-5KG',
        img: 'https://i.ibb.co/PZGTwyqp/unnamed.jpg',
        unit: '—à—Ç',
        full: `–î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞ —à—Ç—É–∫–∞—Ç—É—Ä–∫–∞ –¥–ª—è –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ—Ö —Ä–æ–±—ñ—Ç.\n‚Ä¢ –§–∞–∫—Ç—É—Ä–∞ ‚Äú–∫–∞–º—ñ–Ω—å‚Äù\n‚Ä¢ –î–æ–±—Ä–∞ –∞–¥–≥–µ–∑—ñ—è\n‚Ä¢ –°—Ç—ñ–π–∫–∞ –¥–æ —Å—Ç–∏—Ä–∞–Ω–Ω—è`
      }
    ];

    let PRODUCTS = [...DEFAULT_PRODUCTS];

    async function loadProductsFromXML(){
      try{
        const res = await fetch(XML_FEED_URL, { cache:'no-store' });
        if(!res.ok) throw new Error('Bad status: ' + res.status);

        const text = await res.text();
        const parser = new DOMParser();
        const xml = parser.parseFromString(text, 'application/xml');

        const items = Array.from(xml.getElementsByTagName('item'));
        if(!items.length){
          PRODUCTS = [...DEFAULT_PRODUCTS];
          return;
        }

        const get = (node, tagName) => {
          const el = node.getElementsByTagName(tagName)[0];
          return el ? (el.textContent || '').trim() : '';
        };

        const placeholderImg = 'https://via.placeholder.com/900x600?text=–¢–æ–≤–∞—Ä';

        const list = items.map((node, index)=>{
          const rawId = get(node,'g:id') || get(node,'id') || String(index+1);
          const numericId = Number((rawId || '').replace(/\D/g,'')) || (index+1);

          const title = get(node,'title') || get(node,'g:title') || `–¢–æ–≤–∞—Ä ${numericId}`;
          const description = get(node,'description') || get(node,'g:description') || '';
          const priceText = get(node,'g:price') || '0';
          const price = parseFloat(priceText.replace(',', '.').replace(/[^\d.]/g,'')) || 0;
          const img = get(node,'g:image_link') || get(node,'g:additional_image_link') || placeholderImg;

          const availability = (get(node,'g:availability') || '').toLowerCase();
          if(availability && availability !== 'in stock') return null;

          return {
            id: numericId,
            title,
            category: getCategoryFromTitle(title),
            price,
            sku: rawId,
            img,
            unit:'—à—Ç',
            full: description || '–î–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å —Ç–æ–≤–∞—Ä—É –∑ XML-–ø—Ä–∞–π—Å—É.'
          };
        }).filter(Boolean);

        PRODUCTS = list.length ? list : [...DEFAULT_PRODUCTS];
      }catch(err){
        console.warn('XML load error:', err);
        PRODUCTS = [...DEFAULT_PRODUCTS];
        showToast('–ù–µ –≤–¥–∞–ª–æ—Å—è –ø—Ä–æ—á–∏—Ç–∞—Ç–∏ products.xml ‚Äî –ø–æ–∫–∞–∑—É—î–º–æ —Ç–µ—Å—Ç–æ–≤—ñ —Ç–æ–≤–∞—Ä–∏');
      }
    }

    /* ============================================================
       6) NEWS
    ============================================================ */
    const COMPANY_NEWS = [
      { title: "üî• –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∞–π—Å—É / XML (—Å—å–æ–≥–æ–¥–Ω—ñ)", url: "https://samostroy.shop" },
      { title: "‚úÖ –ú–∏ –∑'—è–≤–∏–ª–∏—Å—è –≤ Facebook", url: "" },
      { title: "‚úÖ –ú–∏ —Ç–µ–ø–µ—Ä —ñ –≤ Linkedin", url: "https://www.linkedin.com/in/dev-geniy/" },
      { title: "‚úÖ –¢–µ–ø–µ—Ä –≤ –Ω–∞—Å —î –¢—ñ–∫ –¢–æ–∫ - –ü—ñ–¥–ø–∏—à–∏—Å—å!", url: "https://www.tiktok.com/@samostroy_drop" },
      { title: "üöö –í—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ù–ü/–£–∫—Ä–ø–æ—à—Ç–∞ ‚Äî —â–æ–¥–µ–Ω–Ω–æ", url: "#" },
      { title: "üéÅ –ü–∞—Ä—Ç–Ω–µ—Ä—Å—å–∫—ñ –∞–∫—Ü—ñ—ó ‚Äî –Ω–∞–ø–∏—à–∏ –º–µ–Ω–µ–¥–∂–µ—Ä—É", action: () => openTelegram("–ü—Ä–∏–≤—ñ—Ç! –•–æ—á—É –¥—ñ–∑–Ω–∞—Ç–∏—Å—å –ø—Ä–æ –∞–∫—Ü—ñ—ó –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä—ñ–≤.") },
      { title: "üß© –¢–û–ü —Ç–æ–≤–∞—Ä–∏ ‚Äî –ø—ñ–¥–±—ñ—Ä–∫–∞ –Ω–∞ —Ç–∏–∂–¥–µ–Ω—å", action: () => openTelegram("–ü—Ä–∏–≤—ñ—Ç! –•–æ—á—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é —ñ –ø—ñ–¥–±—ñ—Ä–∫—É –¢–û–ü —Ç–æ–≤–∞—Ä—ñ–≤ –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ —Å—Ç–∞—Ä—Ç—É.") },
    ];

    function renderNews(){
      const box = document.getElementById('newsList');
      box.innerHTML = '';
      COMPANY_NEWS.forEach(n=>{
        const item = document.createElement('div');
        item.className = 'newsItem';
        item.innerHTML = `<span title="${escapeAttr(n.title)}">${n.title}</span><i data-lucide="chevron-right"></i>`;
        item.addEventListener('click', ()=>{
          if(typeof n.action === 'function') return n.action();
          if(n.url && n.url !== '#') return window.open(n.url, '_blank');
          showToast('–î–æ–¥–∞–π –ø–æ—Å–∏–ª–∞–Ω–Ω—è –¥–ª—è —Ü—ñ—î—ó –Ω–æ–≤–∏–Ω–∏');
        });
        box.appendChild(item);
      });
      if(window.lucide) lucide.createIcons();
    }

    /* ============================================================
       7) ADS LISTS
    ============================================================ */
    const BOARDS = [
      { name: "OLX", url: "https://www.olx.ua/" },
      { name: "Prom.ua (–∫–∞—Ç–∞–ª–æ–≥/–º–∞–≥–∞–∑–∏–Ω)", url: "https://prom.ua/" },
      { name: "Facebook Marketplace", url: "https://www.facebook.com/marketplace/" },
      { name: "Telegram (–∫–∞–Ω–∞–ª–∏/—á–∞—Ç–∏)", url: "https://t.me/" },
      { name: "Viber (—Å–ø—ñ–ª—å–Ω–æ—Ç–∏)", url: "https://www.viber.com/" },
      { name: "Rozetka (–≤–∏—Ç—Ä–∏–Ω–∞/–ø—Ä–æ–¥–∞–≤–µ—Ü—å)", url: "https://seller.rozetka.com.ua/" },
    ];

    const MARKETPLACES = [
      { name: "Rozetka", url: "https://rozetka.com.ua/" },
      { name: "Prom.ua", url: "https://prom.ua/" },
      { name: "EpicentrK", url: "https://epicentrk.ua/" },
      { name: "Allo", url: "https://allo.ua/" },
      { name: "Kasta", url: "https://kasta.ua/" },
      { name: "Bigl.ua", url: "https://bigl.ua/" },
    ];

    function renderAds(){
      const boardsBox = document.getElementById('boardsList');
      const marketsBox = document.getElementById('marketsList');

      boardsBox.innerHTML = '';
      marketsBox.innerHTML = '';

      BOARDS.forEach(x=>{
        const el = document.createElement('div');
        el.className = 'adsLink';
        el.innerHTML = `<span title="${escapeAttr(x.name)}">${x.name}</span><i data-lucide="external-link"></i>`;
        el.addEventListener('click', ()=> window.open(x.url, '_blank'));
        boardsBox.appendChild(el);
      });

      MARKETPLACES.forEach(x=>{
        const el = document.createElement('div');
        el.className = 'adsLink';
        el.innerHTML = `<span title="${escapeAttr(x.name)}">${x.name}</span><i data-lucide="external-link"></i>`;
        el.addEventListener('click', ()=> window.open(x.url, '_blank'));
        marketsBox.appendChild(el);
      });

      if(window.lucide) lucide.createIcons();
    }

    document.getElementById('btnCopyBoards').addEventListener('click', ()=>{
      copyText(BOARDS.map(x=>x.name).join('\n'));
    });
    document.getElementById('btnCopyMarkets').addEventListener('click', ()=>{
      copyText(MARKETPLACES.map(x=>x.name).join('\n'));
    });

    /* ============================================================
       8) CATEGORIES UI
    ============================================================ */
    const catsDesktopEl = document.getElementById('catsDesktop');
    const catsMobileEl  = document.getElementById('catsMobile');

    function uniqCategories(){
      const set = new Set(PRODUCTS.map(p => p.category || '–Ü–Ω—à–µ'));
      CATEGORY_KEYWORDS.forEach(c => set.add(c.name));
      set.add('–Ü–Ω—à–µ');
      return Array.from(set).sort((a,b)=>a.localeCompare(b,'uk'));
    }
    function categoryCount(name){
      return PRODUCTS.filter(p => (p.category || '–Ü–Ω—à–µ') === name).length;
    }

    function renderCategories(){
      const cats = uniqCategories();

      catsDesktopEl.innerHTML = '';
      cats.forEach(name=>{
        const count = categoryCount(name);
        const img = getCategoryImage(name);

        const card = document.createElement('div');
        card.className = 'catCard';
        card.innerHTML = `
          <div class="catArt">
            <img src="${escapeAttr(img)}" alt="${escapeAttr(name)}">
            <div class="shine"></div>
          </div>
          <div class="catName">
            <span>${escapeAttr(name)}</span>
            <small>${count} —à—Ç</small>
          </div>
          <div class="catMeta">
            <span class="pill"><i data-lucide="expand"></i> –í—ñ–¥–∫—Ä–∏—Ç–∏</span>
            <span class="pill"><i data-lucide="copy"></i> –ö–æ–ø—ñ—é–≤–∞—Ç–∏</span>
          </div>
        `;
        card.addEventListener('click', ()=> openCategoryModal(name));
        catsDesktopEl.appendChild(card);
      });

      catsMobileEl.innerHTML = '';
      cats.forEach(name=>{
        const count = categoryCount(name);
        const row = document.createElement('button');
        row.type='button';
        row.className='catChip';
        row.innerHTML = `
          <span class="left">${escapeAttr(name)} <small>(${count})</small></span>
          <span><i data-lucide="chevron-right"></i></span>
        `;
        row.addEventListener('click', ()=> openCategoryModal(name));
        catsMobileEl.appendChild(row);
      });

      if(window.lucide) lucide.createIcons();
    }

    /* ============================================================
       9) CATEGORY MODAL
    ============================================================ */
    const catOverlay = document.getElementById('catOverlay');
    const catModal   = document.getElementById('catModal');
    const modalCatTitle = document.getElementById('modalCatTitle');
    const modalGrid  = document.getElementById('modalGrid');
    const modalEmpty = document.getElementById('modalEmpty');

    const fSearch    = document.getElementById('fSearch');
    const fSort      = document.getElementById('fSort');
    const fPriceFrom = document.getElementById('fPriceFrom');
    const fPriceTo   = document.getElementById('fPriceTo');

    let modalBaseList  = [];

function anyModalOpen(){
  return (
    !catModal.classList.contains('hidden') ||
    !orderModal.classList.contains('hidden') ||
    !cabHelpModal.classList.contains('hidden') ||
    !orderTipOverlay.classList.contains('hidden') ||
    !aiModal.classList.contains('hidden')
  );
}

    function syncBodyLock(){
      document.body.style.overflow = anyModalOpen() ? 'hidden' : '';
    }

    function openCategoryModal(name){
      closeCabHelp();

      modalCatTitle.textContent = name;
      modalBaseList = PRODUCTS.filter(p => (p.category || '–Ü–Ω—à–µ') === name);

      fSearch.value = '';
      fSort.value = 'rel';
      fPriceFrom.value = '';
      fPriceTo.value = '';

      renderModalProducts();
      catOverlay.classList.remove('hidden');
      catModal.classList.remove('hidden');
      syncBodyLock();

      if(window.lucide) lucide.createIcons();
      setTimeout(()=>fSearch.focus(), 30);
    }
    function closeCategoryModal(){
      catOverlay.classList.add('hidden');
      catModal.classList.add('hidden');
      syncBodyLock();
    }
    document.getElementById('btnCloseModal').addEventListener('click', closeCategoryModal);
    catOverlay.addEventListener('click', closeCategoryModal);

    function applyFilters(list){
      let out = [...list];

      const q = fSearch.value.trim().toLowerCase();
      if(q) out = out.filter(p => (p.title||'').toLowerCase().includes(q));

      const pf = Number(fPriceFrom.value || 0);
      const pt = Number(fPriceTo.value || 0);
      if(pf > 0) out = out.filter(p => Number(p.price||0) >= pf);
      if(pt > 0) out = out.filter(p => Number(p.price||0) <= pt);

      const sort = fSort.value;
      if(sort === 'priceAsc') out.sort((a,b)=>(a.price||0)-(b.price||0));
      if(sort === 'priceDesc') out.sort((a,b)=>(b.price||0)-(a.price||0));
      if(sort === 'titleAsc') out.sort((a,b)=>(a.title||'').localeCompare(b.title||'','uk'));
      if(sort === 'titleDesc') out.sort((a,b)=>(b.title||'').localeCompare(a.title||'','uk'));
      return out;
    }

    function renderModalProducts(){
      const list = applyFilters(modalBaseList);

      modalGrid.innerHTML = '';
      modalEmpty.classList.toggle('hidden', list.length !== 0);
      if(!list.length) return;

      list.forEach(p=>{
        const full = normalizeDesc(p.full);
        const short = shortFromFull(p.full);

        const card = document.createElement('article');
        card.className='pCard';
        card.innerHTML = `
          <div class="pHead">
            <div class="pTitle">${escapeAttr(p.title)}</div>
            <button class="copyMini" type="button" title="–ö–æ–ø—ñ—é–≤–∞—Ç–∏ –Ω–∞–∑–≤—É" data-copy="title"><i data-lucide="copy"></i></button>
          </div>

          <div class="pImg">
            <img src="${escapeAttr(p.img)}" alt="${escapeAttr(p.title)}">
          </div>

          <div class="pPriceRow">
            <div class="price">${money(p.price)}</div>
            <button class="copyMini" type="button" title="–ö–æ–ø—ñ—é–≤–∞—Ç–∏ —Ü—ñ–Ω—É" data-copy="price"><i data-lucide="copy"></i></button>
          </div>

          <div class="pDesc">${escapeAttr(short)}</div>

          <div style="padding:0 12px 14px;display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn btnPrimary" type="button" style="flex:1" data-copy="full"><i data-lucide="file-text"></i> –ö–æ–ø—ñ—é–≤–∞—Ç–∏ –æ–ø–∏—Å</button>
          </div>
        `;

        card.addEventListener('click', (e)=>{
          const btn = e.target.closest('[data-copy]');
          if(!btn) return;
          e.preventDefault();
          e.stopPropagation();

          const type = btn.dataset.copy;
          if(type === 'title') copyText(p.title || '');
          if(type === 'price') copyText(String(p.price || ''));
          if(type === 'full')  copyText(full || '');
        });

        modalGrid.appendChild(card);
      });

      if(window.lucide) lucide.createIcons();
    }

    [fSearch, fSort, fPriceFrom, fPriceTo].forEach(el=>{
      el.addEventListener('input', renderModalProducts);
      el.addEventListener('change', renderModalProducts);
    });

    document.getElementById('btnResetFilters').addEventListener('click', ()=>{
      fSearch.value='';
      fSort.value='rel';
      fPriceFrom.value='';
      fPriceTo.value='';
      renderModalProducts();
    });
    document.getElementById('btnCopyAllTitles').addEventListener('click', ()=>{
      const list = applyFilters(modalBaseList);
      const text = list.map(p=>p.title || '').filter(Boolean).join('\n');
      copyText(text);
    });

    /* ============================================================
       10) LOGIN / PROFILE
       ‚úÖ FIX iPhone: compress avatar + safe save + fallback login
    ============================================================ */
    const loginPage = document.getElementById('loginPage');
    const app = document.getElementById('app');

    const loginForm = document.getElementById('loginForm');
    const loginName = document.getElementById('loginName');
    const loginAvatar = document.getElementById('loginAvatar');
    const loginAvatarPreview = document.getElementById('loginAvatarPreview');

    const nameFieldWrap = loginName.closest('.field');
    const filePickMeta = document.getElementById('filePickMeta');
    const filePickBtn  = document.getElementById('filePickBtn');

    let pendingAvatarDataUrl = null;

    function initials(name){
      const parts = String(name || '').trim().split(/\s+/).filter(Boolean);
      if(!parts.length) return 'P';
      const first = parts[0][0] || '';
      const second = (parts[1]?.[0] || parts[0]?.[1] || '');
      return (first + second).toUpperCase();
    }

    function syncNameAttention(){
      nameFieldWrap.classList.toggle('attention', !loginName.value.trim());
    }

    function syncFilePickUI(fileOrFake){
      if(fileOrFake && typeof fileOrFake === 'object' && fileOrFake.name){
        filePickMeta.textContent = fileOrFake.name;
        filePickBtn.classList.remove('pulse');
      }else{
        filePickMeta.textContent = '—Ñ–∞–π–ª –Ω–µ –≤–∏–±—Ä–∞–Ω–æ';
        filePickBtn.classList.add('pulse');
      }
    }

    function setLoginAvatarPreview(name, dataUrl){
      loginAvatarPreview.innerHTML = '';
      if(dataUrl){
        const img = document.createElement('img');
        img.src = dataUrl;
        loginAvatarPreview.appendChild(img);
      }else{
        const div = document.createElement('div');
        div.className = 'ph';
        div.textContent = initials(name);
        loginAvatarPreview.appendChild(div);
      }
    }

    // ‚úÖ make small avatar to fit iPhone storage
    async function makeAvatarDataUrl(file, size = 256, quality = 0.78){
      const url = URL.createObjectURL(file);
      try{
        const img = new Image();
        img.src = url;

        await new Promise((res, rej)=>{
          img.onload = () => res();
          img.onerror = (e) => rej(e);
        });

        const w = img.naturalWidth || img.width;
        const h = img.naturalHeight || img.height;

        const side = Math.min(w, h);
        const sx = Math.floor((w - side) / 2);
        const sy = Math.floor((h - side) / 2);

        const canvas = document.createElement('canvas');
        canvas.width = size;
        canvas.height = size;

        const ctx = canvas.getContext('2d');
        ctx.drawImage(img, sx, sy, side, side, 0, 0, size, size);

        let q = quality;
        let dataUrl = canvas.toDataURL('image/jpeg', q);

        // keep under ~0.9MB (string) for safer storage
        while (dataUrl.length > 900000 && q > 0.5){
          q -= 0.08;
          dataUrl = canvas.toDataURL('image/jpeg', q);
        }

        return dataUrl;
      } finally {
        URL.revokeObjectURL(url);
      }
    }

    loginName.addEventListener('input', ()=>{
      syncNameAttention();
      if(!pendingAvatarDataUrl){
        setLoginAvatarPreview(loginName.value, null);
      }
    });

    // ‚úÖ async handler + compression
    loginAvatar.addEventListener('change', async ()=>{
      const file = loginAvatar.files && loginAvatar.files[0];
      syncFilePickUI(file);

      if(!file){
        pendingAvatarDataUrl = null;
        setLoginAvatarPreview(loginName.value, null);
        return;
      }

      try{
        pendingAvatarDataUrl = await makeAvatarDataUrl(file, 256, 0.78);
      }catch(err){
        console.warn('Avatar convert error, fallback to FileReader:', err);
        try{
          pendingAvatarDataUrl = await new Promise((resolve, reject)=>{
            const reader = new FileReader();
            reader.onload = ()=> resolve(reader.result);
            reader.onerror = reject;
            reader.readAsDataURL(file);
          });
        }catch(e2){
          pendingAvatarDataUrl = null;
        }
      }

      setLoginAvatarPreview(loginName.value, pendingAvatarDataUrl);
    });

    function saveProfile(profile){
      const payload = JSON.stringify(profile);
      // —Å–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ–º—Å—è localStorage, –ø–æ—Ç–æ–º sessionStorage, –ø–æ—Ç–æ–º –ø–∞–º—è—Ç—å
      const r = storageSet(LS_PROFILE_KEY, payload);
      if(!r.ok){
        // –µ—Å–ª–∏ localStorage/ sessionStorage –Ω–µ —Å–º–æ–≥–ª–∏ ‚Äî –≤—Å—ë —Ä–∞–≤–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ø–∞–º—è—Ç—å,
        // –Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ–º —á–µ—Ä–µ–∑ return false
        storageSet(SS_PROFILE_KEY, payload);
        return false;
      }
      return true;
    }
    function loadProfile(){
      try{
        const raw = storageGet(LS_PROFILE_KEY) || storageGet(SS_PROFILE_KEY);
        return raw ? JSON.parse(raw) : null;
      }catch(e){ return null; }
    }
    function clearProfile(){
      storageRemove(LS_PROFILE_KEY);
      storageRemove(SS_PROFILE_KEY);
    }

    function showLogin(){
      app.classList.add('hidden');
      loginPage.classList.remove('hidden');

      loginName.value = '';
      loginAvatar.value = '';
      pendingAvatarDataUrl = null;

      setLoginAvatarPreview('Partner', null);
      syncNameAttention();
      syncFilePickUI(null);

      syncBodyLock();
      if(window.lucide) lucide.createIcons();
    }

    function showApp(profile){
      loginPage.classList.add('hidden');
      app.classList.remove('hidden');

      const name = profile?.name || '–ü–∞—Ä—Ç–Ω–µ—Ä';
      document.getElementById('cabUserName').textContent = name;
      document.getElementById('cabNameUnder').textContent = name;

      const cabAvatar = document.getElementById('cabAvatar');
      cabAvatar.innerHTML = '';
      if(profile?.avatar){
        const img = document.createElement('img');
        img.src = profile.avatar;
        cabAvatar.appendChild(img);
      }else{
        const div = document.createElement('div');
        div.className = 'ph';
        div.textContent = initials(name);
        cabAvatar.appendChild(div);
      }

      document.getElementById('cabMetaLine').textContent = '–ü—Ä–æ—Ñ—ñ–ª—å –∞–∫—Ç–∏–≤–Ω–∏–π ‚Ä¢ –î–∞–Ω—ñ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –ª–æ–∫–∞–ª—å–Ω–æ';

      renderNews();
      renderAds();
      if(window.lucide) lucide.createIcons();
    }

    loginForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      const name = loginName.value.trim();
      if(name.length < 2){
        showToast('–í–≤–µ–¥–∏ —ñ–º‚Äô—è (–º—ñ–Ω. 2 —Å–∏–º–≤–æ–ª–∏)');
        syncNameAttention();
        return;
      }

      const profile = { name, avatar: pendingAvatarDataUrl || null, ts: Date.now() };

      // ‚úÖ try to save; if storage full (iPhone) -> login without avatar
      let ok = saveProfile(profile);
      if(!ok && profile.avatar){
        profile.avatar = null;
        saveProfile(profile);
        showToast('–§–æ—Ç–æ –∑–∞–Ω–∞–¥—Ç–æ –≤–µ–ª–∏–∫–µ ‚Äî —É–≤—ñ–π—à–ª–∏ –±–µ–∑ —Ñ–æ—Ç–æ ‚úÖ');
      }

      // ‚úÖ always login even if storage denied (private mode / quota)
      startApp(profile);
    });

    document.getElementById('loginDemo').addEventListener('click', ()=>{
      const profile = { name: '–Ñ–≤–≥–µ–Ω (Demo)', avatar: null, ts: Date.now() };
      saveProfile(profile);
      startApp(profile);
    });

    document.getElementById('btnLogout').addEventListener('click', ()=>{
      clearProfile();
      showToast('–í–∏ –≤–∏–π—à–ª–∏');
      showLogin();
    });

    document.getElementById('btnEditProfile').addEventListener('click', ()=>{
      const prof = loadProfile();
      if(!prof){ showLogin(); return; }

      app.classList.add('hidden');
      loginPage.classList.remove('hidden');

      loginName.value = prof.name || '';
      loginAvatar.value = '';
      pendingAvatarDataUrl = prof.avatar || null;

      setLoginAvatarPreview(loginName.value, pendingAvatarDataUrl);
      syncNameAttention();
      if(prof.avatar){
        syncFilePickUI({ name: '—Ñ–æ—Ç–æ –∑–±–µ—Ä–µ–∂–µ–Ω–æ' });
      }else{
        syncFilePickUI(null);
      }

      showToast('–û–Ω–æ–≤–∏ –¥–∞–Ω—ñ —Ç–∞ –Ω–∞—Ç–∏—Å–Ω–∏ ‚Äú–£–≤—ñ–π—Ç–∏‚Äù');
      if(window.lucide) lucide.createIcons();
    });

    /* topbar links */
    document.getElementById('btnTg').addEventListener('click', (e)=>{
      e.preventDefault();
      const prof = loadProfile();
      openTelegram(`–ü—Ä–∏–≤—ñ—Ç! –Ø –ø–∞—Ä—Ç–Ω–µ—Ä: ${prof?.name || '–ü–∞—Ä—Ç–Ω–µ—Ä'}.`);
    });
    document.getElementById('btnShop').addEventListener('click', (e)=>{
      e.preventDefault();
      window.open('https://samostroy.shop', '_blank');
    });

    /* footer links */
    document.getElementById('footShop').addEventListener('click', (e)=>{ e.preventDefault(); window.open('https://samostroy.shop','_blank'); });
    document.getElementById('footTg').addEventListener('click', (e)=>{ e.preventDefault(); openTelegram('–ü—Ä–∏–≤—ñ—Ç! –ü–æ—Ç—Ä—ñ–±–Ω–∞ –¥–æ–ø–æ–º–æ–≥–∞ –ø–æ –ø–∞—Ä—Ç–Ω–µ—Ä—Å—å–∫–æ–º—É –∫–∞–±—ñ–Ω–µ—Ç—É.'); });
    document.getElementById('footCgpro').addEventListener('click', (e)=>{ e.preventDefault(); window.open(CGPRO_URL,'_blank'); });
    document.getElementById('footXml').addEventListener('click', (e)=>{ e.preventDefault(); showToast('–§–∞–π–ª: products.xml (–ª–µ–∂–∏—Ç—å –ø–æ—Ä—É—á –∑ index.html)'); });

    document.getElementById('footLogout').addEventListener('click', (e)=>{ e.preventDefault(); document.getElementById('btnLogout').click(); });

    document.getElementById('toolExportProfile').addEventListener('click', ()=>{
      const prof = loadProfile();
      if(!prof){ showToast('–ü—Ä–æ—Ñ—ñ–ª—å –≤—ñ–¥—Å—É—Ç–Ω—ñ–π'); return; }
      const blob = new Blob([JSON.stringify(prof, null, 2)], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'partner_profile.json';
      a.click();
      URL.revokeObjectURL(url);
      showToast('–ï–∫—Å–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ ‚úÖ');
    });

    document.getElementById('toolClearCache').addEventListener('click', ()=>{
      clearProfile();
      showToast('–ö–µ—à –æ—á–∏—â–µ–Ω–æ (–ø—Ä–æ—Ñ—ñ–ª—å)');
      showLogin();
    });

    /* ============================================================
       11) ORDER FLOW (2 steps -> Telegram prefilled)
    ============================================================ */
    const orderOverlay = document.getElementById('orderOverlay');
    const orderModal   = document.getElementById('orderModal');
    const orderStepHint = document.getElementById('orderStepHint');

    const orderStep1 = document.getElementById('orderStep1');
    const orderStep2 = document.getElementById('orderStep2');

    const oPartnerName  = document.getElementById('oPartnerName');
    const oPartnerPhone = document.getElementById('oPartnerPhone');

    const oClientLast  = document.getElementById('oClientLast');
    const oClientFirst = document.getElementById('oClientFirst');
    const oClientPhone = document.getElementById('oClientPhone');
    const oCity        = document.getElementById('oCity');
    const oCarrier     = document.getElementById('oCarrier');
    const oBranch      = document.getElementById('oBranch');
    const oProduct     = document.getElementById('oProduct');
    const oSalePrice   = document.getElementById('oSalePrice');
    const oNotes       = document.getElementById('oNotes');

    let orderDraft = {};

    function openOrderModal(){
      if(!catModal.classList.contains('hidden')) closeCategoryModal();
      closeCabHelp();

      const prof = loadProfile();
      const name = prof?.name || '–ü–∞—Ä—Ç–Ω–µ—Ä';

      orderDraft = {};
      orderStep1.classList.remove('hidden');
      orderStep2.classList.add('hidden');
      orderStepHint.textContent = '–ö—Ä–æ–∫ 1/2 ‚Äî –¥–∞–Ω—ñ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ (–≤–∞—à—ñ).';

      oPartnerName.value = name;
      oPartnerPhone.value = '';

      oClientLast.value = '';
      oClientFirst.value = '';
      oClientPhone.value = '';
      oCity.value = '';
      oCarrier.value = '–ù–æ–≤–∞ –ü–æ—à—Ç–∞';
      oBranch.value = '';
      oProduct.value = '';
      oSalePrice.value = '';
      oNotes.value = '';

      orderOverlay.classList.remove('hidden');
      orderModal.classList.remove('hidden');
      syncBodyLock();

      if(window.lucide) lucide.createIcons();
      setTimeout(()=>oPartnerPhone.focus(), 60);
    }

    function closeOrderModal(){
      orderOverlay.classList.add('hidden');
      orderModal.classList.add('hidden');
      syncBodyLock();
    }

    document.getElementById('btnOrder').addEventListener('click', (e)=>{
      e.preventDefault();
      openOrderModal();
    });

    document.getElementById('btnOrderClose').addEventListener('click', closeOrderModal);
    document.getElementById('btnOrderCancel1').addEventListener('click', closeOrderModal);
    orderOverlay.addEventListener('click', closeOrderModal);

    document.getElementById('btnOrderNext').addEventListener('click', ()=>{
      const name = oPartnerName.value.trim();
      const phone = oPartnerPhone.value.trim();

      if(name.length < 2){ showToast('–í–∫–∞–∂–∏ —ñ–º‚Äô—è –ø–∞—Ä—Ç–Ω–µ—Ä–∞'); return; }
      if(phone.length < 6){ showToast('–í–∫–∞–∂–∏ —Ç–µ–ª–µ—Ñ–æ–Ω –ø–∞—Ä—Ç–Ω–µ—Ä–∞'); return; }

      orderDraft.partnerName = name;
      orderDraft.partnerPhone = phone;

      orderStep1.classList.add('hidden');
      orderStep2.classList.remove('hidden');
      orderStepHint.textContent = '–ö—Ä–æ–∫ 2/2 ‚Äî –¥–∞–Ω—ñ –∫–ª—ñ—î–Ω—Ç–∞ —Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∞.';

      if(window.lucide) lucide.createIcons();
      setTimeout(()=>oClientLast.focus(), 50);
    });

    document.getElementById('btnOrderBack').addEventListener('click', ()=>{
      orderStep2.classList.add('hidden');
      orderStep1.classList.remove('hidden');
      orderStepHint.textContent = '–ö—Ä–æ–∫ 1/2 ‚Äî –¥–∞–Ω—ñ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ (–≤–∞—à—ñ).';
      setTimeout(()=>oPartnerPhone.focus(), 50);
    });

    document.getElementById('btnOrderSend').addEventListener('click', ()=>{
      const last  = oClientLast.value.trim();
      const first = oClientFirst.value.trim();
      const cphone = oClientPhone.value.trim();
      const city  = oCity.value.trim();
      const carrier = oCarrier.value;
      const branch  = oBranch.value.trim();
      const product = oProduct.value.trim();
      const salePrice = String(oSalePrice.value || '').trim();
      const notes = oNotes.value.trim();

      if(last.length < 2 || first.length < 2){ showToast('–í–∫–∞–∂–∏ –ü–Ü–ë –∫–ª—ñ—î–Ω—Ç–∞'); return; }
      if(cphone.length < 6){ showToast('–í–∫–∞–∂–∏ —Ç–µ–ª–µ—Ñ–æ–Ω –∫–ª—ñ—î–Ω—Ç–∞'); return; }
      if(city.length < 2){ showToast('–í–∫–∞–∂–∏ –º—ñ—Å—Ç–æ'); return; }
      if(branch.length < 1){ showToast('–í–∫–∞–∂–∏ –≤—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è'); return; }
      if(product.length < 2){ showToast('–í–∫–∞–∂–∏ —Ç–æ–≤–∞—Ä'); return; }
      if(!salePrice || Number(salePrice) <= 0){ showToast('–í–∫–∞–∂–∏ —Ü—ñ–Ω—É –ø—Ä–æ–¥–∞–∂—É'); return; }

      const msg =
`üßæ –ù–û–í–ï –ó–ê–ú–û–í–õ–ï–ù–ù–Ø (–ø–∞—Ä—Ç–Ω–µ—Ä)

üë§ –ü–∞—Ä—Ç–Ω–µ—Ä: ${orderDraft.partnerName}
üìû –¢–µ–ª –ø–∞—Ä—Ç–Ω–µ—Ä–∞: ${orderDraft.partnerPhone}

üë• –ö–ª—ñ—î–Ω—Ç: ${last} ${first}
üìû –¢–µ–ª –∫–ª—ñ—î–Ω—Ç–∞: ${cphone}

üöö –î–æ—Å—Ç–∞–≤–∫–∞: ${carrier}
üèô –ú—ñ—Å—Ç–æ: ${city}
üè§ –í—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è: ${branch}

üì¶ –¢–æ–≤–∞—Ä: ${product}
üí∞ –¶—ñ–Ω–∞ –ø—Ä–æ–¥–∞–∂—É: ${salePrice} –≥—Ä–Ω

üìù –î–æ–¥–∞—Ç–∫–æ–≤–æ: ${notes || '-'}
`;

      showToast('–í—ñ–¥–∫—Ä–∏–≤–∞—é Telegram‚Ä¶');
      openTelegram(msg);
      closeOrderModal();
    });

    /* ============================================================
       12) CABINET HOW (overlay + modal)
    ============================================================ */
    const cabHelpOverlay = document.getElementById('cabHelpOverlay');
    const cabHelpModal   = document.getElementById('cabHelpModal');

    function openCabHelp(){
      closeOrderTip();

      cabHelpOverlay.classList.remove('hidden');
      cabHelpModal.classList.remove('hidden');
      syncBodyLock();
      if(window.lucide) lucide.createIcons();
    }
    function closeCabHelp(){
      cabHelpOverlay.classList.add('hidden');
      cabHelpModal.classList.add('hidden');
      syncBodyLock();
    }

    document.getElementById('footHow').addEventListener('click', (e)=>{
      e.preventDefault();
      openCabHelp();
    });
    document.getElementById('btnCloseCabHelp').addEventListener('click', closeCabHelp);
    cabHelpOverlay.addEventListener('click', closeCabHelp);

    /* ============================================================
       13) ORDER TIP (for order modal fields)
    ============================================================ */
    const orderTipOverlay = document.getElementById('orderTipOverlay');
    const orderTipModal   = document.getElementById('orderTipModal');

    function openOrderTip(){
      orderTipOverlay.classList.remove('hidden');
      orderTipModal.classList.remove('hidden');
      syncBodyLock();
      if(window.lucide) lucide.createIcons();
    }
    function closeOrderTip(){
      orderTipOverlay.classList.add('hidden');
      orderTipModal.classList.add('hidden');
      syncBodyLock();
    }

    document.getElementById('btnHelp').addEventListener('click', openOrderTip);
    document.getElementById('btnHelpClose').addEventListener('click', closeOrderTip);
    orderTipOverlay.addEventListener('click', closeOrderTip);
    
    
/* ============================================================
NEW   AI MODAL (placeholder)
============================================================ */
const aiOverlay = document.getElementById('aiOverlay');
const aiModal   = document.getElementById('aiModal');

function openAiModal(){
  // –∑–∞–∫—Ä—ã–≤–∞–µ–º –¥—Ä—É–≥–∏–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω—ã–µ –æ–∫–Ω–∞, —á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞–ª–∏
  if(!catModal.classList.contains('hidden')) closeCategoryModal();
  if(!orderModal.classList.contains('hidden')) closeOrderModal();
  if(!cabHelpModal.classList.contains('hidden')) closeCabHelp();
  closeOrderTip();

  aiOverlay.classList.remove('hidden');
  aiModal.classList.remove('hidden');
  syncBodyLock();
  if(window.lucide) lucide.createIcons();
}
function closeAiModal(){
  aiOverlay.classList.add('hidden');
  aiModal.classList.add('hidden');
  syncBodyLock();
}

document.getElementById('btnAiClose').addEventListener('click', closeAiModal);
aiOverlay.addEventListener('click', closeAiModal);


    
    
/* ============================================================
   Quick cards events (–ü–ö + –ú–æ–±)
============================================================ */
function bindQuickNav(){
  const navCats  = document.getElementById('navCats');
  const navAds   = document.getElementById('navAds');
  const navAi    = document.getElementById('navAi');
  const navOrder = document.getElementById('navOrder');

  const mNavCats = document.getElementById('mNavCats');
  const mNavAds  = document.getElementById('mNavAds');
  const mNavAi   = document.getElementById('mNavAi');

  if(navCats)  navCats.addEventListener('click', ()=> smoothScrollToId('secCats'));
  if(navAds)   navAds.addEventListener('click', ()=> smoothScrollToId('secAds'));
  if(navAi)    navAi.addEventListener('click', openAiModal);
  if(navOrder) navOrder.addEventListener('click', openOrderModal);

  if(mNavCats) mNavCats.addEventListener('click', ()=> smoothScrollToId('secCats'));
  if(mNavAds)  mNavAds.addEventListener('click', ()=> smoothScrollToId('secAds'));
  if(mNavAi)   mNavAi.addEventListener('click', openAiModal);
}


   /* ============================================================
   14) ESC handler (close topmost first)
============================================================ */
document.addEventListener('keydown', (e) => {
  if (e.key !== 'Escape') return;

  if (!cabHelpModal.classList.contains('hidden')) return closeCabHelp();
  if (!orderTipOverlay.classList.contains('hidden')) return closeOrderTip();
  if (!aiModal.classList.contains('hidden')) return closeAiModal(); // <-- –≤–æ—Ç —Ç–∞–∫

  if (!orderModal.classList.contains('hidden')) return closeOrderModal();
  if (!catModal.classList.contains('hidden')) return closeCategoryModal();
});

    /* ============================================================
       15) APP START
    ============================================================ */
    function setLoader(on){
      const loader = document.getElementById('loader');
      loader.classList.toggle('hidden', !on);
    }

    async function startApp(profile){
      setLoader(true);
      await loadProductsFromXML();
      renderCategories();
      showApp(profile);
      setLoader(false);
    }

    /* ============================================================
       INIT
    ============================================================ */
    (function init(){
      if(window.lucide) lucide.createIcons();
      document.getElementById('year').textContent = new Date().getFullYear();
      bindQuickNav();

      const prof = loadProfile();
      if(prof && prof.name){
        startApp(prof);
      }else{
        showLogin();
      }
    })();
  </script>
</body>
</html>
